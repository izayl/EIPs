(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{609:function(e,t,i){"use strict";i.r(t);var a=i(46),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h2",{attrs:{id:"simple-summary"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[e._v("#")]),e._v(" Simple Summary")]),e._v(" "),i("p",[e._v("Standardized names of common metrics for Ethereum clients to use with Prometheus, a widely used monitoring and alerting solution.")]),e._v(" "),i("h2",{attrs:{id:"abstract"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),i("p",[e._v("Many Ethereum clients expose a range of metrics in a format compatible with Prometheus to allow operators to monitor the client's behaviour and performance and raise alerts if the chain isn't progressing or there are other indications of errors.\nWhile the majority of these metrics are highly client-specific, reporting on internal implementation details of the client, some are applicable to all clients.\nBy standardizing the naming and format of these common metrics, operators are able to monitor the operation of multiple clients in a single dashboard or alerting configuration.")]),e._v(" "),i("h2",{attrs:{id:"motivation"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[e._v("#")]),e._v(" Motivation")]),e._v(" "),i("p",[e._v("Using common names and meanings for metrics which apply to all clients allows node operators to monitor clusters of nodes using heterogeneous clients using a single dashboard and alerting configuration.\nCurrently there are no agreed names or meanings, leaving client developers to invent their own making it difficult to monitor a heterogeneous cluster.")]),e._v(" "),i("h2",{attrs:{id:"specification"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[e._v("#")]),e._v(" Specification")]),e._v(" "),i("p",[e._v("The table below defines metrics which may be captured by Ethereum clients which expose metrics to Prometheus. Clients may expose additional metrics however these should not use the "),i("code",[e._v("ethereum_")]),e._v(" prefix.")]),e._v(" "),i("table",[i("thead",[i("tr",[i("th",[e._v("Name")]),e._v(" "),i("th",[e._v("Metric type")]),e._v(" "),i("th",[e._v("Definition")]),e._v(" "),i("th",[e._v("JSON-RPC Equivalent")])])]),e._v(" "),i("tbody",[i("tr",[i("td",[e._v("ethereum_blockchain_height")]),e._v(" "),i("td",[e._v("Gauge")]),e._v(" "),i("td",[e._v("The current height of the canonical chain")]),e._v(" "),i("td",[i("code",[e._v("eth_blockNumber")])])]),e._v(" "),i("tr",[i("td",[e._v("ethereum_best_known_block_number")]),e._v(" "),i("td",[e._v("Gauge")]),e._v(" "),i("td",[e._v("The estimated highest block available")]),e._v(" "),i("td",[i("code",[e._v("highestBlock")]),e._v(" of "),i("code",[e._v("eth_syncing")]),e._v(" or "),i("code",[e._v("eth_blockNumber")]),e._v(" if not syncing")])]),e._v(" "),i("tr",[i("td",[e._v("ethereum_peer_count")]),e._v(" "),i("td",[e._v("Gauge")]),e._v(" "),i("td",[e._v("The current number of peers connected")]),e._v(" "),i("td",[i("code",[e._v("net_peerCount")])])]),e._v(" "),i("tr",[i("td",[e._v("ethereum_peer_limit")]),e._v(" "),i("td",[e._v("Gauge")]),e._v(" "),i("td",[e._v("The maximum number of peers this node allows to connect")]),e._v(" "),i("td",[e._v("No equivalent")])])])]),e._v(" "),i("p",[e._v("Note that "),i("code",[e._v("ethereum_best_known_block_number")]),e._v(" always has a value. When the "),i("code",[e._v("eth_syncing")]),e._v(" JSON-RPC method would return "),i("code",[e._v("false")]),e._v(", the current chain height is used.")]),e._v(" "),i("h2",{attrs:{id:"rationale"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[e._v("#")]),e._v(" Rationale")]),e._v(" "),i("p",[e._v("The defined metrics are independent of Ethereum client implementation but provide sufficient information to create an overview dashboard to support monitoring a group of Ethereum nodes.")]),e._v(" "),i("p",[e._v("There is a similar, though more prescriptive, specification for beacon chain client metrics.\nThe specific details of how to expose the metrics has been omitted as there is variance in existing implementations and standardising this does not provide any significant benefit.")]),e._v(" "),i("h2",{attrs:{id:"backwards-compatibility"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#backwards-compatibility"}},[e._v("#")]),e._v(" Backwards Compatibility")]),e._v(" "),i("p",[e._v("This is "),i("em",[e._v("not")]),e._v(" a consensus affecting change.")]),e._v(" "),i("p",[e._v("Clients may already be publishing these metrics using different names and changing to the new form may break existing alerts or dashboards. Clients that want to avoid this incompatibility can expose the metrics under both the old and new names.")]),e._v(" "),i("p",[e._v("Clients may also be publishing metrics with a different meaning using these names. Backwards compatibility cannot be preserved in this case.")]),e._v(" "),i("h2",{attrs:{id:"implementation"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),i("p",[e._v("Pantheon switched to using these standard metric names in its 1.2 release: https://github.com/PegaSysEng/pantheon/pull/1634.")]),e._v(" "),i("h2",{attrs:{id:"references"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),i("ol",[i("li",[e._v("Prometheus. https://prometheus.io")]),e._v(" "),i("li",[e._v("Beacon chain metrics specification. https://github.com/ethereum/eth2.0-metrics/blob/master/metrics.md")])]),e._v(" "),i("h2",{attrs:{id:"copyright"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[e._v("#")]),e._v(" Copyright")]),e._v(" "),i("p",[e._v("Copyright and related rights waived via "),i("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CC0"),i("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);