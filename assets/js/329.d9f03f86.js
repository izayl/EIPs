(window.webpackJsonp=window.webpackJsonp||[]).push([[329],{733:function(t,e,a){"use strict";a.r(e);var i=a(46),o=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),a("p",[t._v("Limit account nonce to be between "),a("code",[t._v("0")]),t._v(" and "),a("code",[t._v("2^52")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),a("p",[t._v("Account nonces are currently specified to be arbitrarily long unsigned integers. Dealing with arbitrary length data in the state witnesses is not optimal, therefore this EIP will allow proofs to represent the nonce in a more optimized way.")]),t._v(" "),a("p",[t._v("Additionally it could prove beneficial to transaction formats, where some improvements are potentially sought by at least three other proposals.")]),t._v(" "),a("p",[t._v("Lastly, this facilitates a minor optimisation in clients, because the nonce no longer needs to be kept as a 256-bit number.")]),t._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),a("p",[t._v("If "),a("code",[t._v("block.number >= FORK_BLOCK")]),t._v(" introduce two new restrictions:")]),t._v(" "),a("ol",[a("li",[t._v("Consider any transaction invalid, where the nonce exceeds "),a("code",[t._v("2^52")]),t._v(".")]),t._v(" "),a("li",[t._v("The "),a("code",[t._v("CREATE")]),t._v(" instruction to abort with an exceptional halt, where the account nonce is "),a("code",[t._v("2^52")]),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("It is unlikely for any nonce to reach or exceed the proposed limit. If one would want to reach that limit via external transactions, it would cost at least "),a("code",[t._v("21000 * (2^64-1) = 387_381_625_547_900_583_915_000")]),t._v(" gas.")])]),t._v(" "),a("li",[a("p",[t._v("It must be noted that in the past, in the Morden testnet, each new account had a starting nonce of "),a("code",[t._v("2^20")]),t._v(" in order to differentiate transactions from mainnet transactions.\nThis mode of replay protection is out of fashion since "),a("RouterLink",{attrs:{to:"/eip-155.html"}},[t._v("EIP-155")]),t._v(" introduced a more elegant way using chain identifiers.")],1)]),t._v(" "),a("li",[a("p",[t._v("Most clients already consider the nonce field to be 64-bit, such as go-ethereum.")])]),t._v(" "),a("li",[a("p",[t._v("All integer values <= 2^52 can be encoded in a 64-bit floating point without any loss of precision, making this value easy to work with in languages that only have floating point number support.")])])]),t._v(" "),a("h2",{attrs:{id:"backwards-compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backwards-compatibility"}},[t._v("#")]),t._v(" Backwards Compatibility")]),t._v(" "),a("p",[t._v("While this is a breaking change, no actual effect should be visible:")]),t._v(" "),a("ol",[a("li",[t._v("There is no account in the state currently which would have a nonce exceeding that value. As of November 2020, the account "),a("code",[t._v("0xea674fdde714fd979de3edf0f56aa9716b898ec8")]),t._v(" is responsible for the highest account nonce at approximately 29 million.")])]),t._v(" "),a("h2",{attrs:{id:"security-considerations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-considerations"}},[t._v("#")]),t._v(" Security Considerations")]),t._v(" "),a("p",[t._v("None.")]),t._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),a("p",[t._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=o.exports}}]);