(window.webpackJsonp=window.webpackJsonp||[]).push([[393],{820:function(t,e,a){"use strict";a.r(e);var r=a(46),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"simple-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[t._v("#")]),t._v(" Simple Summary")]),t._v(" "),a("p",[t._v("Proxy contracts are being increasingly used as both as an upgradeability mechanism\nand a way to save gas when deploying many instances of a particular contract. This\nstandard proposes a set of interfaces for proxies to signal how they work and what\ntheir main implementation is.")]),t._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),a("p",[t._v("Using proxies that delegate their own logic to another contract is becoming an\nincreasingly popular technique for both smart contract upgradeability and creating\ncheap clone contracts.")]),t._v(" "),a("p",[t._v("We don't believe there is value in standardizing any particular implementation\nof a DelegateProxy, given its simplicity, but we believe there is a lot of value\nin agreeing on an interface all proxies use that allows for a standard way to\noperate with proxies.")]),t._v(" "),a("h2",{attrs:{id:"implementations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementations"}},[t._v("#")]),t._v(" Implementations")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("aragonOS")]),t._v(": "),a("a",{attrs:{href:"https://github.com/aragon/aragonOS/blob/master/contracts/apps/AppProxyUpgradeable.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("AppProxyUpgradeable"),a("OutboundLink")],1),t._v(", "),a("a",{attrs:{href:"https://github.com/aragon/aragonOS/blob/master/contracts/apps/AppProxyPinned.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("AppProxyPinned"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://github.com/aragon/aragonOS/blob/master/contracts/kernel/KernelProxy.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("KernelProxy"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("zeppelinOS")]),t._v(": "),a("a",{attrs:{href:"https://github.com/zeppelinos/labs/blob/2da9e859db81a61f2449d188e7193788ca721c65/upgradeability_ownership/contracts/Proxy.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("Proxy"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"standardized-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#standardized-interface"}},[t._v("#")]),t._v(" Standardized interface")]),t._v(" "),a("div",{staticClass:"language-solidity line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-solidity"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERCProxy")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("proxyType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pure")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" proxyTypeId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("implementation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" codeAddr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"code-address-implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-address-implementation"}},[t._v("#")]),t._v(" Code address ("),a("code",[t._v("implementation()")]),t._v(")")]),t._v(" "),a("p",[t._v("The returned code address is the address the proxy would delegate calls to at that\nmoment in time, for that message.")]),t._v(" "),a("h3",{attrs:{id:"proxy-type-proxytype"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proxy-type-proxytype"}},[t._v("#")]),t._v(" Proxy Type ("),a("code",[t._v("proxyType()")]),t._v(")")]),t._v(" "),a("p",[t._v("Checking the proxy type is the way to check whether a contract is a proxy at all.\nWhen a contract fails to return to this method or it returns 0, it can be assumed\nthat the contract is not a proxy.")]),t._v(" "),a("p",[t._v("It also allows for communicating a bit more of information about how the proxy\noperates. It is a pure function, therefore making it effectively constant as\nit cannot return a different value depending on state changes.")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Forwarding proxy")]),t._v(" ("),a("code",[t._v("id = 1")]),t._v("): The proxy will always forward to the same code\naddress. The following invariant should always be true: once the proxy returns\na non-zero code address, that code address should never change.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Upgradeable proxy")]),t._v(" ("),a("code",[t._v("id = 2")]),t._v("): The proxy code address can be changed depending\non some arbitrary logic implemented either at the proxy level or in its forwarded\nlogic.")])])]),t._v(" "),a("h2",{attrs:{id:"benefits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#benefits"}},[t._v("#")]),t._v(" Benefits")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Source code verification")]),t._v(": right now when checking the code of a proxy in explorers\nlike Etherscan, it just shows the code in the proxy itself but not the actual\ncode of the contract. By standardizing this construct, they will be able to show\nboth the actual ABI and code for the contract.")])]),t._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),a("p",[t._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);