(window.webpackJsonp=window.webpackJsonp||[]).push([[628],{1046:function(e,t,a){"use strict";a.r(t);var n=a(46),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"simple-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[e._v("#")]),e._v(" Simple Summary")]),e._v(" "),a("p",[e._v("A standardized URI for transaction receipt with complete information about transaction.")]),e._v(" "),a("p",[e._v("A standard way of representing a submitted transaction.")]),e._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),a("p",[e._v("A transaction hash is not very meaningful on its own, because it looks just like any other hash, and it might lack important information for reading a transaction. This standard includes all needed information for displaying a transaction and it's details, such as "),a("code",[e._v("chainId")]),e._v(", "),a("code",[e._v("method")]),e._v(" signature called and "),a("code",[e._v("events")]),e._v(" signatures emitted.")]),e._v(" "),a("h3",{attrs:{id:"use-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-cases"}},[e._v("#")]),e._v(" Use-cases")]),e._v(" "),a("p",[e._v("Transaction Receipt URIs embedded in QR-codes, hyperlinks in web-pages, emails or chat messages provide for robust cross-application signaling between very loosely coupled applications. A standardized URI format allows for instant invocation of the userâ€™s preferred transaction explorer application. Such as:")]),e._v(" "),a("ul",[a("li",[e._v("In web3 (dapps, mining pools, exchanges), links would automatically open user's preferred transaction explorer;")]),e._v(" "),a("li",[e._v("In wallets, for users sharing transaction receipts easier;")]),e._v(" "),a("li",[e._v("In chat applications, as a reply to an "),a("RouterLink",{attrs:{to:"/zh/eip-681.html"}},[e._v("ERC-681")]),e._v(" transaction request;")],1),e._v(" "),a("li",[e._v("In crypto vending machines, a QRCode can be displayed when transactions are submitted;")]),e._v(" "),a("li",[e._v("Anywhere transaction receipts are presented to users.")])]),e._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[e._v("#")]),e._v(" Motivation")]),e._v(" "),a("p",[e._v("Interoperability for web3: wallets, browsers and messengers.")]),e._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[e._v("#")]),e._v(" Specification")]),e._v(" "),a("h3",{attrs:{id:"syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syntax"}},[e._v("#")]),e._v(" Syntax")]),e._v(" "),a("p",[e._v('Transaction receipt URLs contain "ethereum" in their schema (protocol) part and are constructed as follows:')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('receipt                 = erc831_part transaction_hash [ "@" chain_id ] [ "?" parameters ]\nerc831_part             = "ethereum:tx-" \ntransaction_hash        = "0x" 64*HEXDIG \nchain_id                = 1*DIGIT\nparameters              = parameter *( "&" parameter )\nparameter               = key "=" value\nkey                     = "method" / "events"\nvalue                   = function_signature / event_list\nfunction_signature      = function_name "(" TYPE *( "," TYPE) ")"\nfunction_name           = STRING\nevent_list              = event_signature *( ";" event_signature )\nevent_signature         = event_name "(" event_type *( "," event_type) ")"\nevent_name              = STRING\nevent_type              = ["!"] TYPE\n')])])]),a("p",[e._v("Where "),a("code",[e._v("TYPE")]),e._v(" is a standard ABI type name, as defined in "),a("a",{attrs:{href:"https://solidity.readthedocs.io/en/develop/abi-spec.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ethereum Contract ABI specification"),a("OutboundLink")],1),e._v(". "),a("code",[e._v("STRING")]),e._v(" is a URL-encoded unicode string of arbitrary length.")]),e._v(" "),a("p",[e._v("The exclamation symbol ("),a("code",[e._v("!")]),e._v("), in "),a("code",[e._v("event_type")]),e._v(", is used to identify indexed event parameters.")]),e._v(" "),a("h3",{attrs:{id:"semantics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#semantics"}},[e._v("#")]),e._v(" Semantics")]),e._v(" "),a("p",[a("code",[e._v("transaction_hash")]),e._v(" is mandatory. The hash must be looked up in the corresponding "),a("code",[e._v("chain_id")]),e._v(' transaction history, if not found it should be looked into the pending transaction queue and rechecked until is found. If not found anequivalent error as "transaction not found error" should be shown instead of the transaction. When the transaction is pending, it should keep checking until the transaction is included in a block and becomes "unrevertable" (usually 12 blocks after transaction is included).')]),e._v(" "),a("p",[a("code",[e._v("chain_id")]),e._v(" is optional and contains the decimal chain ID, such that transactions on various test and private networks can be represented as well. If no "),a("code",[e._v("chain_id")]),e._v(" is present, the $ETH/mainnet ("),a("code",[e._v("1")]),e._v(") is considered.")]),e._v(" "),a("p",[e._v("If "),a("code",[e._v("method")]),e._v(" is not present, this means that the transaction receipt URI does not specify details, or that it was a transaction with no calldata. When present it needs to be validated by comparing the first 4 bytes of transaction calldata with the first 4 bytes of the keccak256 hash of "),a("code",[e._v("method")]),e._v(', if invalid, an equivalent error as "method validation error" must be shown instead of the transaction.')]),e._v(" "),a("p",[e._v("If "),a("code",[e._v("events")]),e._v(" is not present, this means that the transaction receipt URI does not specify details, or that the transaction did not raised any events. Pending and failed transactions don't validate events, however, when transaction is successful (or changes from pending to success) and events are present in URI, each event in the "),a("code",[e._v("event_list")]),e._v(' must occur at least once in the transaction receipt event logs, otherwise an equivalent error as "event validation error: {event(s) [$event_signature, ...] not found}" should be shown instead of the transaction.')]),e._v(" "),a("h4",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[e._v("#")]),e._v(" Examples")]),e._v(" "),a("p",[e._v("Simple ETH transfer: "),a("code",[e._v("ethereum:tx-0x1143b5e38fe3cf585fb026fb9b5ce35c85a691786397dc8a23a07a62796d8172@1")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://etherscan.io/tx/0x4465e7cce3c784f264301bfe26fc17609855305213ec74c716c7561154b76fec#eventlog",target:"_blank",rel:"noopener noreferrer"}},[e._v("Complex contract transaction"),a("OutboundLink")],1),e._v(": "),a("code",[e._v('ethereum:tx-0x4465e7cce3c784f264301bfe26fc17609855305213ec74c716c7561154b76fec@1?method="issueAndActivateBounty(address,uint256,string,uint256,address,bool,address,uint256)"&events="Transfer(!address,!address,uint256);BountyIssued(uint256);ContributionAdded(uint256,!address,uint256);BountyActivated(uint256,address)"')])]),e._v(" "),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[e._v("#")]),e._v(" Rationale")]),e._v(" "),a("p",[e._v("The goal of this standard envolves only the transport of submitted transactions, and therefore transaction data must be loaded from blockchain or pending transaction queue, which also serves as a validation of the transaction existence.")]),e._v(" "),a("p",[e._v('Transaction hash not found is normal in fresh transactions, but can also mean that effectively a transaction was never submitted or have been replaced (through "higher gasPrice" nonce override or through an uncle/fork).')]),e._v(" "),a("p",[e._v("In order to decode transaction parameters and events, a part of the ABI is required. The transaction signer have to know the ABI to sign a transaction, and is also who is creating a transaction receipt, so the transaction receipt can optionally be shared with the information needed to decode the transaction call data and it's events.")]),e._v(" "),a("h2",{attrs:{id:"backwards-compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backwards-compatibility"}},[e._v("#")]),e._v(" Backwards Compatibility")]),e._v(" "),a("p",[e._v("Future upgrades that are partially or fully incompatible with this proposal must use a prefix other than "),a("code",[e._v("tx-")]),e._v(" that is separated by a dash (-) character from whatever follows it, as specified by "),a("RouterLink",{attrs:{to:"/zh/eip-831.html"}},[e._v("ERC-831")]),e._v(".")],1),e._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/zh/eip-831.html"}},[e._v("ERC-831")])],1),e._v(" "),a("li",[a("RouterLink",{attrs:{to:"/zh/eip-681.html"}},[e._v("ERC-681")])],1)]),e._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[e._v("#")]),e._v(" Copyright")]),e._v(" "),a("p",[e._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CC0"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=s.exports}}]);