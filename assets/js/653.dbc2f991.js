(window.webpackJsonp=window.webpackJsonp||[]).push([[653],{1073:function(e,t,a){"use strict";a.r(t);var s=a(46),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"simple-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[e._v("#")]),e._v(" Simple Summary")]),e._v(" "),a("p",[e._v("A standard layout and naming format for walletstore and keystore for both hierarchical (e.g. filesystem, Amazon S3) and non-hierarchical (key/value) storage systems.")]),e._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),a("p",[e._v("Ethereum wallets have no standards for their layout in persistent storage, making different wallet implementations incompatible.  This defines a standard for the placement of Ethereum walletstores and keystores, making it possible for different software to work with the same wallets and keys.")]),e._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[e._v("#")]),e._v(" Motivation")]),e._v(" "),a("p",[e._v("A standard layout for wallets and accounts allows interoperability between validators.  This benefits users, as they can move from one validator software to another (and back) without requiring movement of files.  This is important because any movement of files containing keys involves danger of either deleting them or duplicating them, both of which could cause loss of access to funds.")]),e._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[e._v("#")]),e._v(" Specification")]),e._v(" "),a("p",[e._v("There are four elements for a wallet that need to be addressed.  These are defined below.")]),e._v(" "),a("h3",{attrs:{id:"base-location"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#base-location"}},[e._v("#")]),e._v(" Base location")]),e._v(" "),a("p",[e._v("The base location is required to be well-known, either pre-defined or defined by the storage system's connection parameters.")]),e._v(" "),a("p",[e._v("For filesystems the pre-defined base location for different operating systems is as follows:")]),e._v(" "),a("ul",[a("li",[e._v("Windows: "),a("code",[e._v("%APPDATA%\\ethereum2\\wallets")])]),e._v(" "),a("li",[e._v("MacOSX: "),a("code",[e._v("${HOME}/Library/Application Support/ethereum2/wallets")])]),e._v(" "),a("li",[e._v("Linux: "),a("code",[e._v("${HOME}/.config/ethereum2/wallets")])])]),e._v(" "),a("p",[e._v("For other hierarchical stores, for example Amazon S3, the base location MUST be the lower-case hex string representing the "),a("a",{attrs:{href:"../../assets/eip-2680/sha256-384-512.pdf"}},[e._v("SHA-256")]),e._v(' hash of the string "Ethereum 2 wallet:" appended with the identifier for the hierarchical store.  For example, if the account ID for a user\'s Amazon S3 account is "AbC0438EB" then:')]),e._v(" "),a("ul",[a("li",[e._v("string would be "),a("code",[e._v("Ethereum 2 wallet:AbC0438EB")])]),e._v(" "),a("li",[e._v("SHA-256 hash of string would be the byte array "),a("code",[e._v("0x991ec14a8d13836b10d8c3039c9e30876491cb8aa9c9c16967578afc815c9229")])]),e._v(" "),a("li",[e._v("base location would be the string "),a("code",[e._v("991ec14a8d13836b10d8c3039c9e30876491cb8aa9c9c16967578afc815c9229")])])]),e._v(" "),a("p",[e._v("For non-hierarchical stores there is no base location.")]),e._v(" "),a("h3",{attrs:{id:"wallet-container"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wallet-container"}},[e._v("#")]),e._v(" Wallet container")]),e._v(" "),a("p",[e._v("The wallet container holds the walletstore and related keystores.")]),e._v(" "),a("p",[e._v("The wallet container is identified by the wallet's UUID.  It MUST be a string following the syntactic structure as laid out in "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc4122#section-3",target:"_blank",rel:"noopener noreferrer"}},[e._v("section 3 of RFC 4122"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"walletstore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#walletstore"}},[e._v("#")]),e._v(" Walletstore")]),e._v(" "),a("p",[e._v("The walletstore element contains the walletstore and is held within the wallet container.  It is identified by the wallet's UUID.  It MUST be a string following the syntactic structure as laid out in "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc4122#section-3",target:"_blank",rel:"noopener noreferrer"}},[e._v("section 3 of RFC 4122"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"keystore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#keystore"}},[e._v("#")]),e._v(" Keystore")]),e._v(" "),a("p",[e._v("The keystore element contains the keystore for a given key and is held within the wallet container.  It is identified by the key's UUID.  It MUST be a string following the syntactic structure as laid out in "),a("a",{attrs:{href:"https://tools.ietf.org/html/rfc4122#section-3",target:"_blank",rel:"noopener noreferrer"}},[e._v("section 3 of RFC 4122"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"hierarchical-store-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hierarchical-store-example"}},[e._v("#")]),e._v(" Hierarchical store example")]),e._v(" "),a("p",[e._v("Hierarchical stores are a common way to store and organize information.  The most common example is the filesystem, but a number of object-based stores such as Amazon S3 also provide hierarchical naming.")]),e._v(" "),a("p",[e._v("Putting these elements together for a sample wallet with wallet UUID "),a("code",[e._v("1f031fff-c51d-44fc-8baf-d6b304cb70a7")]),e._v(" and key UUIDs "),a("code",[e._v("1302106c-8441-4e2e-b687-6c77f49fc624")]),e._v(" and "),a("code",[e._v("4a320100-83fd-4db7-8126-6d6d205ba834")]),e._v(" gives the following layout:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("- 1f031fff-c51d-44fc-8baf-d6b304cb70a7\n+- 1302106c-8441-4e2e-b687-6c77f49fc624\n+- 1f031fff-c51d-44fc-8baf-d6b304cb70a7\n+- 4a320100-83fd-4db7-8126-6d6d205ba834\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"non-hierarchical-store-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#non-hierarchical-store-example"}},[e._v("#")]),e._v(" Non-hierarchical store example")]),e._v(" "),a("p",[e._v("Non-hierarchical stores use a simplified approach where the wallet UUID and key UUIDs are concatenated using the ':' character.  Using the same example wallet and key UUIDs as above would result in objects with the following keys:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("1f031fff-c51d-44fc-8baf-d6b304cb70a7:1302106c-8441-4e2e-b687-6c77f49fc624\n1f031fff-c51d-44fc-8baf-d6b304cb70a7:1f031fff-c51d-44fc-8baf-d6b304cb70a7\n1f031fff-c51d-44fc-8baf-d6b304cb70a7:4a320100-83fd-4db7-8126-6d6d205ba834\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("h3",{attrs:{id:"protecting-against-concurrent-write-access"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#protecting-against-concurrent-write-access"}},[e._v("#")]),e._v(" Protecting against concurrent write access")]),e._v(" "),a("p",[e._v("TBD")]),e._v(" "),a("h3",{attrs:{id:"iterating-over-wallets"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iterating-over-wallets"}},[e._v("#")]),e._v(" Iterating over wallets")]),e._v(" "),a("p",[e._v("In the case of hierarchical stores and iteration-capable non-hierarchical stores iteration over wallets is a matter of iterating over the files in the root container.")]),e._v(" "),a("p",[e._v('An implementer MAY include an index in the base location.  If so then it MUST follow the structure as specified in the following "Index format" section.')]),e._v(" "),a("h3",{attrs:{id:"iterating-over-accounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iterating-over-accounts"}},[e._v("#")]),e._v(" Iterating over accounts")]),e._v(" "),a("p",[e._v("In the case of hierarchical stores iteration over accounts is a matter of iterating over the files in the wallet container.")]),e._v(" "),a("p",[e._v('An implementer MAY include an index within a wallet container for accounts within that wallet.  If so then it MUST follow the structure as specified in the following "Index format" section.')]),e._v(" "),a("h3",{attrs:{id:"index-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-format"}},[e._v("#")]),e._v(" Index format")]),e._v(" "),a("p",[e._v("The index format is the same for both wallets and accounts, following a standard JSON schema.")]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"array"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"items"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"object"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"properties"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"uuid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"string"')]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"string"')]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"required"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"uuid"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"name"')]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br")])]),a("p",[e._v("The index MUST use the identifier 'index'.")]),e._v(" "),a("p",[e._v("Public keys must NOT be stored in the index.")]),e._v(" "),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[e._v("#")]),e._v(" Rationale")]),e._v(" "),a("p",[e._v("A standard for walletstores, similar to that for keystores, provides a higher level of compatibility between wallets and allows for simpler wallet and key interchange between them.")]),e._v(" "),a("h2",{attrs:{id:"implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[e._v("#")]),e._v(" Implementation")]),e._v(" "),a("p",[e._v("A Go implementation of the filesystem layout can be found at "),a("a",{attrs:{href:"https://github.com/wealdtech/go-eth2-wallet-filesystem",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/wealdtech/go-eth2-wallet-filesystem"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("A Go implementation of the Amazon S3 layout can be found at "),a("a",{attrs:{href:"https://github.com/wealdtech/go-eth2-wallet-s3",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/wealdtech/go-eth2-wallet-s3"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"security-considerations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-considerations"}},[e._v("#")]),e._v(" Security Considerations")]),e._v(" "),a("p",[e._v("Locations for wallet stores are defined to be within each user's personal space, reducing the possibility of accidental exposure of information.  It is, however, still possible for permissions to be set such that this data is world-readable, and applications implementing this EIP should attempt to set, and reset, permissions to ensure that only the relevant user has access to the information.")]),e._v(" "),a("p",[e._v("The names for both wallet and key stores are UUIDs, ensuring that no data is leaked from the metadata.")]),e._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[e._v("#")]),e._v(" Copyright")]),e._v(" "),a("p",[e._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("CC0"),a("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);