(window.webpackJsonp=window.webpackJsonp||[]).push([[602],{1018:function(t,e,a){"use strict";a.r(e);var o=a(46),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"simple-summary"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[t._v("#")]),t._v(" Simple Summary")]),t._v(" "),a("p",[t._v("To increase smart contract security, this proposal adds a new opcode that can be used to call another contract (or itself) while disallowing any modifications to the state during the call (and its subcalls, if present).")]),t._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),a("p",[t._v("This proposal adds a new opcode that can be used to call another contract (or itself) while disallowing any modifications to the state during the call (and its subcalls, if present). Any opcode that attempts to perform such a modification (see below for details) will result in an exception instead of performing the modification.")]),t._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),a("p",[t._v("Currently, there is no restriction about what a called contract can do, as long as the computation can be performed with the amount of gas provided. This poses certain difficulties about smart contract engineers; after a regular call, unless you know the called contract, you cannot make any assumptions about the state of the contracts. Furthermore, because you cannot know the order of transactions before they are confirmed by miners, not even an outside observer can be sure about that in all cases.")]),t._v(" "),a("p",[t._v("This EIP adds a way to call other contracts and restrict what they can do in the simplest way. It can be safely assumed that the state of all accounts is the same before and after a static call.")]),t._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),a("p",[t._v("Introduce a new "),a("code",[t._v("STATIC")]),t._v(" flag to the virtual machine. This flag is set to "),a("code",[t._v("false")]),t._v(" initially. Its value is always copied to sub-calls with an exception for the new opcode below.")]),t._v(" "),a("p",[t._v("Opcode: "),a("code",[t._v("0xfa")]),t._v(".")]),t._v(" "),a("p",[a("code",[t._v("STATICCALL")]),t._v(" functions equivalently to a "),a("code",[t._v("CALL")]),t._v(', except it takes only 6 arguments (the "value" argument is not included and taken to be zero), and calls the child with the '),a("code",[t._v("STATIC")]),t._v(" flag set to "),a("code",[t._v("true")]),t._v(" for the execution of the child. Once this call returns, the flag is reset to its value before the call.")]),t._v(" "),a("p",[t._v("Any attempts to make state-changing operations inside an execution instance with "),a("code",[t._v("STATIC")]),t._v(" set to "),a("code",[t._v("true")]),t._v(" will instead throw an exception. These operations include "),a("code",[t._v("CREATE")]),t._v(", "),a("code",[t._v("CREATE2")]),t._v(", "),a("code",[t._v("LOG0")]),t._v(", "),a("code",[t._v("LOG1")]),t._v(", "),a("code",[t._v("LOG2")]),t._v(", "),a("code",[t._v("LOG3")]),t._v(", "),a("code",[t._v("LOG4")]),t._v(", "),a("code",[t._v("SSTORE")]),t._v(", and "),a("code",[t._v("SELFDESTRUCT")]),t._v(". They also include "),a("code",[t._v("CALL")]),t._v(" with a non-zero value. As an exception, "),a("code",[t._v("CALLCODE")]),t._v(" is not considered state-changing, even with a non-zero value.")]),t._v(" "),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),a("p",[t._v("This allows contracts to make calls that are clearly non-state-changing, reassuring developers and reviewers that re-entrancy bugs or other problems cannot possibly arise from that particular call; it is a pure function that returns an output and does nothing else. This may also make purely functional HLLs easier to implement.")]),t._v(" "),a("h2",{attrs:{id:"backwards-compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backwards-compatibility"}},[t._v("#")]),t._v(" Backwards Compatibility")]),t._v(" "),a("p",[t._v("This proposal adds a new opcode but does not modify the behaviour of other opcodes and thus is backwards compatible for old contracts that do not use the new opcode and are not called via the new opcode.")]),t._v(" "),a("h2",{attrs:{id:"test-cases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-cases"}},[t._v("#")]),t._v(" Test Cases")]),t._v(" "),a("p",[t._v("To be written.")]),t._v(" "),a("h2",{attrs:{id:"implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),a("p",[t._v("Copyright and related rights waived via "),a("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),a("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=s.exports}}]);