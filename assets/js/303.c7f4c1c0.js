(window.webpackJsonp=window.webpackJsonp||[]).push([[303],{704:function(t,e,s){"use strict";s.r(e);var a=s(46),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"simple-summary"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[t._v("#")]),t._v(" Simple Summary")]),t._v(" "),s("p",[t._v("This EIP defines a HTTP API standard for a BLS remote signer, consumed by validator clients to sign block proposals and attestations in the context of Ethereum 2.0 (eth2).")]),t._v(" "),s("h2",{attrs:{id:"abstract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),s("p",[t._v("A "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/validator.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("validator"),s("OutboundLink")],1),t._v(" client contributes to the consensus of the Eth2 blockchain by signing proposals and attestations of blocks, using a BLS private key which must be available to this client at all times.")]),t._v(" "),s("p",[t._v("The BLS remote signer API is designed to be consumed by validator clients, looking for a more secure avenue to store their BLS12-381 private key(s), enabling them to run in more permissive and scalable environments.")]),t._v(" "),s("h2",{attrs:{id:"motivation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),s("p",[t._v("Eth2 utilizes "),s("a",{attrs:{href:"https://github.com/cfrg/draft-irtf-cfrg-bls-signature/",target:"_blank",rel:"noopener noreferrer"}},[t._v("BLS12-381"),s("OutboundLink")],1),t._v(" signatures.")]),t._v(" "),s("p",[t._v("Consensus on the eth2 Blockchain is achieved via the proposal and attestation of blocks from validator clients, using a BLS private key ("),s("em",[t._v("signing")]),t._v(" key) which must be available each time a message is signed: that is, at least once every epoch (6.4 minutes), during a small window of time within this epoch (a "),s("em",[t._v("slot")]),t._v(", i.e. 12 seconds), as each validator is expected to attest exactly once per epoch.")]),t._v(" "),s("p",[t._v("The "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-specs",target:"_blank",rel:"noopener noreferrer"}},[t._v("eth2 specification"),s("OutboundLink")],1),t._v(" does not explicitly provide a directive on where this BLS private key must/should be stored, leaving this implementation detail to the client teams, who assume that this cryptographic secret is stored on the same host as the validator client.")]),t._v(" "),s("p",[t._v("This assumption is sufficient in the use case where the validator client is running in a physically secure network (i.e. nobody, but the operator, has a chance to log-in into the machine hosting the validator client), as such configuration would only allow "),s("em",[t._v("outbound")]),t._v(" calls from the validator client. In this situation, only a physical security breach, or a Remote Code Execution (RCE) vulnerability can allow an attacker to either have arbitrary access to the storage or to the memory of the device.")]),t._v(" "),s("p",[t._v("There are, however, use cases where it is required by the operator to run a validator client node in less constrained security environments, as the ones given by a cloud provider. Notwithstanding any security expectation, nothing prevents a rogue operator from gaining arbitrary access to the assets running inside a node.")]),t._v(" "),s("p",[t._v("The situation is not better when the requirement is to execute the validators by leveraging a container orchestration solution (e.g. Kubernetes). The handling of secret keys across nodes can become a burden both from an operational as well as a security perspective.")]),t._v(" "),s("p",[t._v("The proposed solution comprises running a specialized node with exclusive access to the secret keys, listening to a simple API (defined in the "),s("a",{attrs:{href:"#specification"}},[t._v("Specification")]),t._v(" section), and returning the requested signatures. Operators working under this schema must utilize clients with the adequate feature supporting the consumption of this API.")]),t._v(" "),s("p",[t._v("The focus of this specification is the supply of BLS signatures "),s("em",[t._v("on demand")]),t._v(". The aspects of authentication, key management (creation, update, and deletion), and transport encryption are discussed in the "),s("a",{attrs:{href:"#rationale"}},[t._v("Rationale")]),t._v(" section of this document. Moreover, the "),s("a",{attrs:{href:"#threat-model"}},[t._v("Threat Model")]),t._v(" section of this document provides a (non-exhaustive) list of threats and attack vectors, along with the suggested related mitigation strategy.")]),t._v(" "),s("h2",{attrs:{id:"specification"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),s("h3",{attrs:{id:"get-upcheck"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-upcheck"}},[t._v("#")]),t._v(" "),s("code",[t._v("GET /upcheck")])]),t._v(" "),s("p",[s("em",[s("strong",[t._v("Responses")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Success")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("td",[s("code",[t._v("200")])])]),t._v(" "),s("tr",[s("td",[t._v("Content")]),t._v(" "),s("td",[s("code",[t._v('{"status": "OK"}')])])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"get-keys"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-keys"}},[t._v("#")]),t._v(" "),s("code",[t._v("GET /keys")])]),t._v(" "),s("p",[t._v("Returns the identifiers of the keys available to the signer.")]),t._v(" "),s("p",[s("em",[s("strong",[t._v("Responses")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Success")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("td",[s("code",[t._v("200")])])]),t._v(" "),s("tr",[s("td",[t._v("Content")]),t._v(" "),s("td",[s("code",[t._v('{"keys": "[identifier]"}')])])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"post-sign-identifier"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#post-sign-identifier"}},[t._v("#")]),t._v(" "),s("code",[t._v("POST /sign/:identifier")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("URL Parameter")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v(":identifier")])]),t._v(" "),s("td",[s("code",[t._v("public_key_hex_string_without_0x")])])])])]),t._v(" "),s("p",[s("em",[s("strong",[t._v("Request")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("JSON Body")]),t._v(" "),s("th",[s("br")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("bls_domain")])]),t._v(" "),s("td",[s("strong",[t._v("Required")])]),t._v(" "),s("td",[t._v("The BLS Signature domain."),s("br"),t._v("As defined in the "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/beacon-chain.md#domain-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("specification"),s("OutboundLink")],1),t._v(", in lowercase, omitting the "),s("code",[t._v("domain")]),t._v(" prefix."),s("br"),t._v("Supporting "),s("code",[t._v("beacon_proposer")]),t._v(", "),s("code",[t._v("beacon_attester")]),t._v(", and "),s("code",[t._v("randao")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("data")])]),t._v(" "),s("td",[s("strong",[t._v("Required")])]),t._v(" "),s("td",[t._v("The data to be signed."),s("br"),t._v("As defined in the specifications for "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-APIs/blob/master/types/block.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("block"),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-APIs/blob/master/types/attestation.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("attestation"),s("OutboundLink")],1),t._v(", and "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-APIs/blob/master/types/misc.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("epoch"),s("OutboundLink")],1),t._v(".")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("fork")])]),t._v(" "),s("td",[s("strong",[t._v("Required")])]),t._v(" "),s("td",[t._v("A "),s("code",[t._v("Fork")]),t._v(" object containing previous and current versions."),s("br"),t._v("As defined in the "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-APIs/blob/master/types/misc.yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("specification"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("genesis_validators_root")])]),t._v(" "),s("td",[s("strong",[t._v("Required")])]),t._v(" "),s("td",[t._v("A "),s("code",[t._v("Hash256")]),t._v(" for domain separation and chain versioning.")])]),t._v(" "),s("tr",[s("td",[s("br")]),t._v(" "),s("td",[t._v("Optional")]),t._v(" "),s("td",[t._v("Any other field will be ignored by the signer")])])])]),t._v(" "),s("p",[s("em",[s("strong",[t._v("Responses")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Success")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("td",[s("code",[t._v("200")])])]),t._v(" "),s("tr",[s("td",[t._v("Content")]),t._v(" "),s("td",[s("code",[t._v('{"signature": "<signature_hex_string>"}')])])])])]),t._v(" "),s("p",[t._v("Where signature is a "),s("a",{attrs:{href:"https://github.com/ethereum/eth2.0-specs/blob/dev/specs/phase0/beacon-chain.md#bls-signatures",target:"_blank",rel:"noopener noreferrer"}},[t._v("BLS signature"),s("OutboundLink")],1),t._v(" byte array encoded as a hexadecimal string.")]),t._v(" "),s("p",[s("em",[t._v("or")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Error")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("td",[s("code",[t._v("400")])])]),t._v(" "),s("tr",[s("td",[t._v("Content")]),t._v(" "),s("td",[s("code",[t._v('{"error": "<Bad Request Error Message>"}')])])])])]),t._v(" "),s("p",[s("em",[t._v("or")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Error")]),t._v(" "),s("th",[s("br")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("td",[s("code",[t._v("404")])])]),t._v(" "),s("tr",[s("td",[t._v("Content")]),t._v(" "),s("td",[s("code",[t._v('{"error": "Key not found: <identifier>"}')])])])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"rationale"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),s("h3",{attrs:{id:"unix-philosophy-simple-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unix-philosophy-simple-api"}},[t._v("#")]),t._v(" UNIX philosophy: Simple API")]),t._v(" "),s("p",[t._v("This API specification contains only three methods: one for "),s("strong",[t._v("status")]),t._v(", one for "),s("strong",[t._v("listing the available keys")]),t._v(", and one to "),s("strong",[t._v("produce a signature")]),t._v(". There are no methods for authentication, key management, nor transport encryption.")]),t._v(" "),s("p",[t._v("The following subsections discuss aspects to be considered by the client implementers relative to these subjects.")]),t._v(" "),s("h4",{attrs:{id:"implementation-of-additional-features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementation-of-additional-features"}},[t._v("#")]),t._v(" Implementation of additional features")]),t._v(" "),s("p",[t._v("From an API pipeline view, we have two nodes: The validator client (1) that makes requests to the remote signer (2). A more sophisticated chain can be built by introducing elements between these two nodes. Either by setting up reverse proxy services, or by adding plugins to the remote signer implementation.")]),t._v(" "),s("h4",{attrs:{id:"authentication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),s("p",[t._v("Can be accomplished through the use of an HTTP Request Header. There are several ways to negotiate and issue a valid token to authenticate the communication between the validator client and the remote signer, each of them with potential drawbacks (e.g replay attacks, challenges in distributing the token to the validator client, etc.). In general, any method of authentication must be combined with transport encryption to be effective.")]),t._v(" "),s("p",[t._v("The operator can also implement network Access Control Lists (ACLs) between the validator client's network and the remote signer's network, reducing the attack surface by requiring a potential attacker to be positioned in the same network as the validator client.")]),t._v(" "),s("h4",{attrs:{id:"key-management"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#key-management"}},[t._v("#")]),t._v(" Key management")]),t._v(" "),s("p",[t._v("There are several ways to store secret keys, namely Hardware Security Modules (HSM), Secrets management applications (e.g. Hashicorp Vault), cloud storage with tight private network ACL rules, or even raw files in a directory. In general the remote signer implementers will abstract the storage medium from the HTTP API.")]),t._v(" "),s("p",[t._v("It is in this perspective, that any procedure to create, update, or delete keys should be built separate from the client implementation.")]),t._v(" "),s("h4",{attrs:{id:"transport-encryption"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transport-encryption"}},[t._v("#")]),t._v(" Transport Encryption")]),t._v(" "),s("p",[t._v("If the operator is working with self-signed certificates, it is required that the client enhancement consuming the remote signer allows this option.")]),t._v(" "),s("h2",{attrs:{id:"test-cases"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-cases"}},[t._v("#")]),t._v(" Test Cases")]),t._v(" "),s("h3",{attrs:{id:"test-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-data"}},[t._v("#")]),t._v(" Test Data")]),t._v(" "),s("ul",[s("li",[t._v("BLS Pair\n"),s("ul",[s("li",[t._v("Public key: "),s("code",[t._v("0xb7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a")]),t._v(".")]),t._v(" "),s("li",[t._v("Secret key: "),s("code",[t._v("0x68081afeb7ad3e8d469f87010804c3e8d53ef77d393059a55132637206cc59ec")]),t._v(".")])])]),t._v(" "),s("li",[t._v("Signing root: "),s("code",[t._v("0xb6bb8f3765f93f4f1e7c7348479289c9261399a3c6906685e320071a1a13955c")]),t._v(".")]),t._v(" "),s("li",[t._v("Expected signature: "),s("code",[t._v("0xb5d0c01cef3b028e2c5f357c2d4b886f8e374d09dd660cd7dd14680d4f956778808b4d3b2ab743e890fc1a77ae62c3c90d613561b23c6adaeb5b0e288832304fddc08c7415080be73e556e8862a1b4d0f6aa8084e34a901544d5bb6aeed3a612")]),t._v(".")])]),t._v(" "),s("h3",{attrs:{id:"get-upcheck-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-upcheck-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("GET /upcheck")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Success")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v localhost:9000/upcheck\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" GET /upcheck HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" OK\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:25:08 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OK"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br")])]),s("h3",{attrs:{id:"get-keys-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#get-keys-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("GET /keys")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Success")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v localhost:9000/keys\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" GET /publicKeys HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" OK\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("116")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:25:36 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"keys"')]),t._v(":"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Server Error")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Preparation")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## `chmod` keys directory to the octal 311 (-wx--x--x).")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v localhost:9000/keys\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" GET /publicKeys HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" Internal Server Error\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("43")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:26:09 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Storage error: PermissionDenied"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br")])]),s("h3",{attrs:{id:"post-sign-identifier-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#post-sign-identifier-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("POST /sign/:identifier")])]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Success")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v -X POST -d @payload.json -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v(" localhost:9000/sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\nNote: Unnecessary use of -X or --request, POST is already inferred.\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" POST /sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* upload completely sent off: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" out of "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" bytes\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" OK\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("210")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:16:02 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"signature"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xb5d0c01cef3b028e2c5f357c2d4b886f8e374d09dd660cd7dd14680d4f956778808b4d3b2ab743e890fc1a77ae62c3c90d613561b23c6adaeb5b0e288832304fddc08c7415080be73e556e8862a1b4d0f6aa8084e34a901544d5bb6aeed3a612"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Bad Request Error")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v -X POST -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foobar'")]),t._v(" -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v(" localhost:9000/sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\nNote: Unnecessary use of -X or --request, POST is already inferred.\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" POST /sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* upload completely sent off: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" out of "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v(" bytes\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v(" Bad Request\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("38")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:15:05 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Unable to parse body message from JSON: Error('),s("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("expected ident"),s("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(', line: 1, column: 2)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# No Keys Available")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v -X POST -d @payload.json -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v(" localhost:9000/sign/000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\nNote: Unnecessary use of -X or --request, POST is already inferred.\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" POST /sign/000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* upload completely sent off: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" out of "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" bytes\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" Not Found\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:18:53 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Key not found: 000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Server Error")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Preparation")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## `chmod` both keys directory and file to the octal 311 (-wx--x--x).")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## `chmod` back to 755 to delete them afterwards.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -v -X POST -d @payload.json -H "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type: application/json'")]),t._v(" localhost:9000/sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Response")]),t._v("\nNote: Unnecessary use of -X or --request, POST is already inferred.\n*   Trying "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:9000"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n* TCP_NODELAY "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v("\n* Connected to localhost "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" POST /sign/b7354252aa5bce27ab9537fd0158515935f3c3861419e1b4b6c8219b5dbd15fcf907bddf275442f3e32f904f79807a2a HTTP/1.1\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Host: localhost:9000\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" User-Agent: curl/7.68.0\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Accept: */*\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Type: application/json\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Content-Length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n* upload completely sent off: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" out of "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("84")]),t._v(" bytes\n* Mark bundle as not supporting multiuse\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" HTTP/1.1 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" Internal Server Error\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" content-length: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("43")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" date: Wed, "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v(" Sep "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" 02:21:08 GMT\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("\n* Connection "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#0 to host localhost left intact")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Storage error: PermissionDenied"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br"),s("span",{staticClass:"line-number"},[t._v("106")]),s("br"),s("span",{staticClass:"line-number"},[t._v("107")]),s("br"),s("span",{staticClass:"line-number"},[t._v("108")]),s("br")])]),s("h2",{attrs:{id:"implementation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Repository Url")]),t._v(" "),s("th",[t._v("Language")]),t._v(" "),s("th",[t._v("Organization")]),t._v(" "),s("th",[t._v("Commentary")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/sigp/rust-bls-remote-signer",target:"_blank",rel:"noopener noreferrer"}},[t._v("BLS Remote Signer"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Rust")]),t._v(" "),s("td",[t._v("Sigma Prime")]),t._v(" "),s("td",[t._v("Supports proposed specification.")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/PegaSysEng/web3signer",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web3signer"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Java")]),t._v(" "),s("td",[t._v("PegaSys")]),t._v(" "),s("td",[t._v("Supports proposed specification, although with "),s("a",{attrs:{href:"https://pegasyseng.github.io/web3signer/web3signer-eth2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("slightly different methods"),s("OutboundLink")],1),t._v(":"),s("br"),t._v("{"),s("code",[t._v("/sign")]),t._v(" => "),s("code",[t._v("/api/v1/eth2/sign")]),t._v(", "),s("code",[t._v("/publicKeys")]),t._v(" => "),s("code",[t._v("/api/v1/eth2/publicKeys")]),t._v("}.")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://docs.prylabs.network/docs/wallet/remote/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Remote Signing Wallet"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("Golang")]),t._v(" "),s("td",[t._v("Prysmatics Labs")]),t._v(" "),s("td",[t._v("Supports both gRPC and JSON over HTTP.")])])])]),t._v(" "),s("h2",{attrs:{id:"security-considerations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-considerations"}},[t._v("#")]),t._v(" Security Considerations")]),t._v(" "),s("h3",{attrs:{id:"threat-model"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threat-model"}},[t._v("#")]),t._v(" Threat model")]),t._v(" "),s("p",[t._v("Let's consider the following threats and their mitigations:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Threat")]),t._v(" "),s("th",[t._v("Mitigation(s)")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("An attacker can spoof the validator client.")]),t._v(" "),s("td",[t._v("See the discussion at "),s("a",{attrs:{href:"#authentication"}},[t._v("Authentication")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can send a crafted message to the signer, leading to a slashing offense.")]),t._v(" "),s("td",[t._v("It is the responsibility of the operator of the remote signer to add a validation module, as discussed at "),s("a",{attrs:{href:"#implementation-of-additional-features"}},[t._v("Implementation of additional features")]),t._v(".")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can create, update, or delete secret keys.")]),t._v(" "),s("td",[t._v("Keys are not to be writable via any interface of the remote signer.")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can repudiate a sent message.")]),t._v(" "),s("td",[t._v("Implement logging in the signer. Enhance it by sending logs to a syslog box.")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can disclose the contents of a private key by retrieving the key from storage.")]),t._v(" "),s("td",[t._v("Storage in Hardware security module (HSM)."),s("br"),s("em",[t._v("or")]),s("br"),t._v("Storage in Secrets management applications (e.g. Hashicorp Vault).")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can eavesdrop on the uploading of a secret key.")]),t._v(" "),s("td",[t._v("Upload the keys using a secure channel, based on each storage specification.")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can eavesdrop on the retrieval of a key from the remote signer.")]),t._v(" "),s("td",[t._v("Always pass the data between storage and remote signer node using a secure channel.")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can dump the memory in the remote signer to disclose a secret key.")]),t._v(" "),s("td",[t._v("Prevent physical access to the node running the remote signer."),s("br"),s("em",[t._v("or")]),s("br"),t._v("Prevent access to the terminal of the node running the remote signer: Logs being sent to a syslog box. Deployments triggered by a simple, non-parameterized API."),s("br"),s("em",[t._v("or")]),s("br"),t._v("Implement zeroization of the secret key at memory."),s("br"),s("em",[t._v("or")]),s("br"),t._v("Explore the compilation and running of the remote signer in a Trusted execution environment (TEE).")])]),t._v(" "),s("tr",[s("td",[t._v("An attacker can DoS the remote signer.")]),t._v(" "),s("td",[t._v("Implement IP filtering."),s("br"),s("em",[t._v("or")]),s("br"),t._v("Implement Rate limiting.")])])])]),t._v(" "),s("h2",{attrs:{id:"copyright"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),s("p",[t._v("Copyright and related rights waived via "),s("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),s("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=n.exports}}]);