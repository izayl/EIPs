(window.webpackJsonp=window.webpackJsonp||[]).push([[420],{831:function(t,s,n){"use strict";n.r(s);var a=n(46),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"simple-summary"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#simple-summary"}},[t._v("#")]),t._v(" Simple Summary")]),t._v(" "),n("p",[t._v("An extension of the "),n("RouterLink",{attrs:{to:"/eip-721.html"}},[t._v("ERC-721 standard")]),t._v(" to enable ERC721 tokens to own other ERC721 tokens and ERC20 tokens.")],1),t._v(" "),n("p",[t._v("An extension of the "),n("RouterLink",{attrs:{to:"/eip-20.html"}},[t._v("ERC-20")]),t._v(" and "),n("a",{attrs:{href:"https://github.com/ethereum/EIPs/issues/223",target:"_blank",rel:"noopener noreferrer"}},[t._v("ERC-223"),n("OutboundLink")],1),t._v(" standards to enable ERC20 and ERC223 tokens to be owned by ERC721 tokens.")],1),t._v(" "),n("p",[t._v("This specification covers four different kinds of composable tokens:")]),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"#erc721-top-down-composable"}},[t._v("ERC998ERC721 top-down composable tokens that receive, hold and transfer ERC721 tokens")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#erc20-top-down-composable"}},[t._v("ERC998ERC20 top-down composable tokens that receive, hold and transfer ERC20 tokens")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#erc721-bottom-up-composable"}},[t._v("ERC998ERC721 bottom-up composable tokens that attach themselves to other ERC721 tokens.")])]),t._v(" "),n("li",[n("a",{attrs:{href:"#erc20-bottom-up-composable"}},[t._v("ERC998ERC20 bottom-up composable tokens that attach themselves to ERC721 tokens.")])])]),t._v(" "),n("h2",{attrs:{id:"abstract"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),n("ol",[n("li",[t._v("An ERC998ERC721 top-down composable is an ERC721 token with additional functionality for owning other ERC721 tokens.")]),t._v(" "),n("li",[t._v("An ERC998ERC20 top-down composable is an ERC721 token with additional functionality for owning ERC20 tokens.")]),t._v(" "),n("li",[t._v("An ERC998ERC721 bottom-up composable is an ERC721 token with additional functionality for being owned by an ERC721 token.")]),t._v(" "),n("li",[t._v("An ERC998ERC20 bottom-up composable is an ERC20 token with additional functionality for being owned by an ERC721 token.")])]),t._v(" "),n("p",[t._v("A top-down composable contract stores and keeps track of child tokens for each of its tokens.")]),t._v(" "),n("p",[t._v("A bottom-up composable contract stores and keeps track of a parent token for each its tokens.")]),t._v(" "),n("p",[t._v("With composable tokens it is possible to compose lists or trees of ERC721 and ERC20 tokens connected by ownership. Any such structure will have a single owner address at the root of the structure that is the owner of the entire composition. The entire composition can be transferred with one transaction by changing the root owner.")]),t._v(" "),n("p",[t._v("Different composables, top-down and bottom-up, have their advantages and disadvantages which are explained in the "),n("a",{attrs:{href:"#rationale"}},[t._v("Rational section")]),t._v(". It is possible for a token to be one or more kinds of composable token.")]),t._v(" "),n("p",[t._v("A non-fungible token is ERC998 compliant and is an ERC998 Composable if it implements one or more of the following interfaces:")]),t._v(" "),n("ul",[n("li",[t._v("ERC998ERC721TopDown")]),t._v(" "),n("li",[t._v("ERC998ERC20TopDown")]),t._v(" "),n("li",[t._v("ERC998ERC721BottomUp")]),t._v(" "),n("li",[t._v("ERC998ERC20BottomUp")])]),t._v(" "),n("h2",{attrs:{id:"specification"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),n("h3",{attrs:{id:"erc721"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc721"}},[t._v("#")]),t._v(" ERC721")]),t._v(" "),n("p",[t._v("ERC998ERC721 top-down, ERC998ERC20 top-down, and ERC998ERC721 bottom-up composable contracts must implement the "),n("RouterLink",{attrs:{to:"/eip-721.html"}},[t._v("ERC-721 interface")]),t._v(".")],1),t._v(" "),n("h3",{attrs:{id:"erc20"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc20"}},[t._v("#")]),t._v(" ERC20")]),t._v(" "),n("p",[t._v("ERC998ERC20 bottom-up composable contracts must implement the "),n("RouterLink",{attrs:{to:"/eip-20.html"}},[t._v("ERC-20 interface")]),t._v(".")],1),t._v(" "),n("h3",{attrs:{id:"erc165"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc165"}},[t._v("#")]),t._v(" ERC165")]),t._v(" "),n("p",[t._v("The "),n("RouterLink",{attrs:{to:"/eip-165.html"}},[t._v("ERC-165 standard")]),t._v(" must be applied to each ERC998 interface that is used.")],1),t._v(" "),n("h3",{attrs:{id:"authentication"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),n("p",[t._v("Authenticating whether a user or contract can execute some action works the same for both ERC998ERC721 top-down and ERC998ERC721 bottom-up composables.")]),t._v(" "),n("p",[t._v("A "),n("code",[t._v("rootOwner")]),t._v(" refers to the owner address at the top of a tree of composables and ERC721 tokens.")]),t._v(" "),n("p",[t._v("Authentication within any composable is done by finding the rootOwner and comparing it to "),n("code",[t._v("msg.sender")]),t._v(", the return result of "),n("code",[t._v("getApproved(tokenId)")]),t._v(" and the return result of "),n("code",[t._v("isApprovedForAll(rootOwner, msg.sender)")]),t._v(". If a match is found then authentication passes, otherwise authentication fails and the contract throws.")]),t._v(" "),n("p",[t._v("Here is an example of authentication code:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isApprovedForAll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApproved")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("The "),n("code",[t._v("approve(address _approved, uint256 _tokenId)")]),t._v(" and "),n("code",[t._v("getApproved(uint256 _tokenId)")]),t._v(" ERC721 functions are implemented specifically for the rootOwner. This enables a tree of composables to be transferred to a new rootOwner without worrying about which addresses have been approved in child composables, because any prior approves can only be used by the prior rootOwner.")]),t._v(" "),n("p",[t._v("Here are example implementations:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("approve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _approved"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\t\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isApprovedForAll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  rootOwnerAndTokenIdToApprovedAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _approved"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("emit")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Approval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _approved"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getApproved")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" rootOwnerAndTokenIdToApprovedAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"traversal"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#traversal"}},[t._v("#")]),t._v(" Traversal")]),t._v(" "),n("p",[t._v("The rootOwner of a composable is gotten by calling "),n("code",[t._v("rootOwnerOf(uint256 _tokenId)")]),t._v(" or "),n("code",[t._v("rootOwnerOfChild(address _childContract, uint256 _childTokenId)")]),t._v(". These functions are used by top-down and bottom-up composables to traverse up the tree of composables and ERC721 tokens to find the rootOwner.")]),t._v(" "),n("p",[t._v("ERC998ERC721 top-down and bottom-up composables are interoperable with each other. It is possible for a top-down composable to own a bottom-up composable or for a top-down composable to own an ERC721 token that owns a bottom-up token. In any configuration calling "),n("code",[t._v("rootOwnerOf(uint256 _tokenID)")]),t._v(" on a composable will return the root owner address at the top of the ownership tree.")]),t._v(" "),n("p",[t._v("It is important to get the traversal logic of "),n("code",[t._v("rootOwnerOf")]),t._v(" right. The logic for "),n("code",[t._v("rootOwnerOf")]),t._v(" is the same whether or not a composable is bottom-up or top-down or both.\nHere is the logic:")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Logic for rootOwnerOf(uint256 _tokenId)\n\nIf the token is a bottom-up composable and has a parent token then call rootOwnerOf for the parent token.\n    If the call was successful then the returned address is the rootOwner.\n    Otherwise call rootOwnerOfChild for the parent token.\n        If the call was successful then the returned address is the rootOwner.\n        Otherwise get the owner address of the token and that is the rootOwner.\nOtherwise call rootOwnerOfChild for the token\n    If the call was successful then the returned address is the rootOwner.\n    Otherwise get the owner address of the token and that is the rootOwner.\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("Calling "),n("code",[t._v("rootOwnerOfChild")]),t._v(" for a token means the following logic:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Logic for calling rootOwnerOfChild for a tokenId")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" tokenOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" childContract "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC998ERC721")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOfChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("But understand that the real call to "),n("code",[t._v("rootOwnerOfChild")]),t._v(" should be made with assembly so that the code can check if the call failed and so that the "),n("code",[t._v("staticcall")]),t._v(" opcode is used to ensure that no state is modified.")]),t._v(" "),n("p",[t._v('Tokens/contracts that implement the above authentication and traversal functionality are "composable aware".')]),t._v(" "),n("h3",{attrs:{id:"composable-transfer-function-parameter-format"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composable-transfer-function-parameter-format"}},[t._v("#")]),t._v(" Composable Transfer Function Parameter Format")]),t._v(" "),n("p",[t._v("Composable functions that make transfers follow the same parameter format: "),n("strong",[t._v("from:to:what")]),t._v(".")]),t._v(" "),n("p",[t._v("For example the "),n("code",[t._v("getChild(address _from, uint256 _tokenId, address _childContract, uint256 _childTokenId)")]),t._v(" composable function transfers an ERC721 token from an address to a top-down composable. The "),n("code",[t._v("_from")]),t._v(" parameter is the "),n("strong",[t._v("from")]),t._v(", the "),n("code",[t._v("_tokenId")]),t._v(" parameter is the "),n("strong",[t._v("to")]),t._v(" and the "),n("code",[t._v("address _childContract, uint256 _childTokenId")]),t._v(" parameters are the "),n("strong",[t._v("what")]),t._v(".")]),t._v(" "),n("p",[t._v("Another example is the "),n("code",[t._v("safeTransferChild(uint256 _fromTokenId, address _to, address _childContract, uint256 _childTokenId)")]),t._v(" function. The "),n("code",[t._v("_fromTokenId")]),t._v(" is the "),n("strong",[t._v("from")]),t._v(", the "),n("code",[t._v("_to")]),t._v(" is the "),n("strong",[t._v("to")]),t._v(" and the "),n("code",[t._v("address _childContract, address _childTokenId")]),t._v(" parameters are the "),n("strong",[t._v("what")]),t._v(".")]),t._v(" "),n("h3",{attrs:{id:"transferfrom-safetransferfrom-functions-do-not-transfer-tokens-owned-by-tokens"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferfrom-safetransferfrom-functions-do-not-transfer-tokens-owned-by-tokens"}},[t._v("#")]),t._v(" transferFrom/safeTransferFrom Functions Do Not Transfer Tokens Owned By Tokens")]),t._v(" "),n("p",[t._v("In bottom-up and top-down composable contracts the "),n("code",[t._v("transferFrom")]),t._v(" and "),n("code",[t._v("safeTransferFrom")]),t._v(" functions must throw if they are called directly to transfer a token that is owned by another token.")]),t._v(" "),n("p",[t._v("The reason for this is that these functions do not explicitly specify which token owns a token to be transferred. "),n("a",{attrs:{href:"#explicit-transfer-parameters"}},[t._v("See the rational section for more information about this.")])]),t._v(" "),n("p",[n("code",[t._v("transferFrom/safeTransferFrom")]),t._v(" functions must be used to transfer tokens that are owned by an address.")]),t._v(" "),n("h3",{attrs:{id:"erc721-top-down-composable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc721-top-down-composable"}},[t._v("#")]),t._v(" ERC721 Top-Down Composable")]),t._v(" "),n("p",[t._v("ERC721 top-down composables act as containers for ERC721 tokens.")]),t._v(" "),n("p",[t._v("ERC721 top-down composables are ERC721 tokens that can receive, hold and transfer ERC721 tokens.")]),t._v(" "),n("p",[t._v("There are two ways to transfer a ERC721 token to a top-down composable:")]),t._v(" "),n("ol",[n("li",[t._v("Use the "),n("code",[t._v("function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data)")]),t._v(" function. The "),n("code",[t._v("_to")]),t._v(" argument is the top-down composable contract address. The "),n("code",[t._v("bytes data")]),t._v(" argument holds the integer value of the top-down composable tokenId that the ERC721 token is transferred to.")]),t._v(" "),n("li",[t._v("Call "),n("code",[t._v("approve")]),t._v(" in the ERC721 token contract for the top-down composable contract. Then call "),n("code",[t._v("getChild")]),t._v(" in the composable contract.")])]),t._v(" "),n("p",[t._v("The first ways is for ERC721 contracts that have a "),n("code",[t._v("safeTransferFrom")]),t._v(" function. The second way is for contracts that do not have this function such as cryptokitties.")]),t._v(" "),n("p",[t._v("Here is an example of transferring ERC721 token 3 from an address to top-down composable token 6:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" tokenId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("memory")]),t._v(" tokenIdBytes "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("bytes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("assembly")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mstore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenIdBytes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC721")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("contractAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" composableAddress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tokenIdBytes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("Every ERC721 top-down composable compliant contract must implement the ERC998ERC721TopDown interface.")]),t._v(" "),n("p",[t._v("The ERC998ERC721TopDownEnumerable and ERC998ERC20TopDownEnumerable interfaces are optional.")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.4.24")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @title ERC998ERC721 Top-Down Composable Non-Fungible Token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  Note: the ERC-165 identifier for this interface is 0x1efdf36a")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC721TopDown")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token receives a child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The prior owner of the token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toTokenId The token that receives the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReceivedChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a child token is transferred from a token to an address.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The parent token that the child token is being transferred from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The new owner address of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of tokenId.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to query for a root owner address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of a child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The contract address of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOfChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the parent tokenId of a child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The contract address of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenOwner The parent address of the parent token and ERC998 magic value")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenId The parent tokenId of _tokenId")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownerOfChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" parentTokenOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" parentTokenId\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice A token receives a child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _operator The address that caused the transfer.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The owner of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The token that is being transferred to the parent.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Up to the first 32 bytes contains an integer which is the receiving parent tokenId.  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onERC721Received")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _operator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer bottom-up composable child token from top-down composable to other ERC721 token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The bottom-up composable contract of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The token that is being transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferChildToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get a child token from an ERC721 contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The address that owns the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that becomes the parent owner")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br"),n("span",{staticClass:"line-number"},[t._v("100")]),n("br"),n("span",{staticClass:"line-number"},[t._v("101")]),n("br"),n("span",{staticClass:"line-number"},[t._v("102")]),n("br"),n("span",{staticClass:"line-number"},[t._v("103")]),n("br"),n("span",{staticClass:"line-number"},[t._v("104")]),n("br"),n("span",{staticClass:"line-number"},[t._v("105")]),n("br"),n("span",{staticClass:"line-number"},[t._v("106")]),n("br"),n("span",{staticClass:"line-number"},[t._v("107")]),n("br"),n("span",{staticClass:"line-number"},[t._v("108")]),n("br"),n("span",{staticClass:"line-number"},[t._v("109")]),n("br"),n("span",{staticClass:"line-number"},[t._v("110")]),n("br"),n("span",{staticClass:"line-number"},[t._v("111")]),n("br"),n("span",{staticClass:"line-number"},[t._v("112")]),n("br"),n("span",{staticClass:"line-number"},[t._v("113")]),n("br"),n("span",{staticClass:"line-number"},[t._v("114")]),n("br"),n("span",{staticClass:"line-number"},[t._v("115")]),n("br"),n("span",{staticClass:"line-number"},[t._v("116")]),n("br"),n("span",{staticClass:"line-number"},[t._v("117")]),n("br"),n("span",{staticClass:"line-number"},[t._v("118")]),n("br"),n("span",{staticClass:"line-number"},[t._v("119")]),n("br"),n("span",{staticClass:"line-number"},[t._v("120")]),n("br"),n("span",{staticClass:"line-number"},[t._v("121")]),n("br"),n("span",{staticClass:"line-number"},[t._v("122")]),n("br"),n("span",{staticClass:"line-number"},[t._v("123")]),n("br"),n("span",{staticClass:"line-number"},[t._v("124")]),n("br"),n("span",{staticClass:"line-number"},[t._v("125")]),n("br"),n("span",{staticClass:"line-number"},[t._v("126")]),n("br"),n("span",{staticClass:"line-number"},[t._v("127")]),n("br"),n("span",{staticClass:"line-number"},[t._v("128")]),n("br"),n("span",{staticClass:"line-number"},[t._v("129")]),n("br"),n("span",{staticClass:"line-number"},[t._v("130")]),n("br"),n("span",{staticClass:"line-number"},[t._v("131")]),n("br"),n("span",{staticClass:"line-number"},[t._v("132")]),n("br"),n("span",{staticClass:"line-number"},[t._v("133")]),n("br"),n("span",{staticClass:"line-number"},[t._v("134")]),n("br"),n("span",{staticClass:"line-number"},[t._v("135")]),n("br"),n("span",{staticClass:"line-number"},[t._v("136")]),n("br"),n("span",{staticClass:"line-number"},[t._v("137")]),n("br"),n("span",{staticClass:"line-number"},[t._v("138")]),n("br"),n("span",{staticClass:"line-number"},[t._v("139")]),n("br"),n("span",{staticClass:"line-number"},[t._v("140")]),n("br"),n("span",{staticClass:"line-number"},[t._v("141")]),n("br"),n("span",{staticClass:"line-number"},[t._v("142")]),n("br"),n("span",{staticClass:"line-number"},[t._v("143")]),n("br"),n("span",{staticClass:"line-number"},[t._v("144")]),n("br"),n("span",{staticClass:"line-number"},[t._v("145")]),n("br")])]),n("h4",{attrs:{id:"rootownerof"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rootownerof"}},[t._v("#")]),t._v(" rootOwnerOf")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of tokenId.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to query for a root owner address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("This function traverses token owners until the the root owner address of "),n("code",[t._v("_tokenId")]),t._v(" is found.")]),t._v(" "),n("p",[t._v("The first 4 bytes of rootOwner contain the ERC998 magic value "),n("code",[t._v("0xcd740db5")]),t._v(". The last 20 bytes contain the root owner address.")]),t._v(" "),n("p",[t._v("The magic value is returned because this function may be called on contracts when it is unknown if the contracts have a "),n("code",[t._v("rootOwnerOf")]),t._v(" function. The magic value is used in such calls to ensure a valid return value is received.")]),t._v(" "),n("p",[t._v("If it is unknown whether a contract has the "),n("code",[t._v("rootOwnerOf")]),t._v(" function then the first four bytes of the "),n("code",[t._v("rootOwner")]),t._v(" return value must be compared to "),n("code",[t._v("0xcd740db5")]),t._v(".")]),t._v(" "),n("p",[n("code",[t._v("0xcd740db5")]),t._v(" is equal to:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootOwnerOf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootOwnerOfChild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tokenOwnerOf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ownerOfChild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("Here is an example of a value returned by "),n("code",[t._v("rootOwnerOf")]),t._v(".\n"),n("code",[t._v("0xcd740db50000000000000000e5240103e1ff986a2c8ae6b6728ffe0d9a395c59")])]),t._v(" "),n("h4",{attrs:{id:"rootownerofchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rootownerofchild"}},[t._v("#")]),t._v(" rootOwnerOfChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of a child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The contract address of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOfChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("This function traverses token owners until the the root owner address of the supplied child token is found.")]),t._v(" "),n("p",[t._v("The first 4 bytes of rootOwner contain the ERC998 magic value "),n("code",[t._v("0xcd740db5")]),t._v(". The last 20 bytes contain the root owner address.")]),t._v(" "),n("p",[t._v("The magic value is returned because this function may be called on contracts when it is unknown if the contracts have a "),n("code",[t._v("rootOwnerOf")]),t._v(" function. The magic value is used in such calls to ensure a valid return value is received.")]),t._v(" "),n("p",[t._v("If it is unknown whether a contract has the "),n("code",[t._v("rootOwnerOfChild")]),t._v(" function then the first four bytes of the "),n("code",[t._v("rootOwner")]),t._v(" return value must be compared to "),n("code",[t._v("0xcd740db5")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"ownerofchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ownerofchild"}},[t._v("#")]),t._v(" ownerOfChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the parent tokenId of a child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The contract address of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenOwner The parent address of the parent token and ERC998 magic value")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenId The parent tokenId of _tokenId")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownerOfChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" parentTokenOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" parentTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[t._v("This function is used to get the parent tokenId of a child token and get the owner address of the parent token.")]),t._v(" "),n("p",[t._v("The first 4 bytes of parentTokenOwner contain the ERC998 magic value "),n("code",[t._v("0xcd740db5")]),t._v(". The last 20 bytes contain the parent token owner address.")]),t._v(" "),n("p",[t._v("The magic value is returned because this function may be called on contracts when it is unknown if the contracts have a "),n("code",[t._v("ownerOfChild")]),t._v(" function. The magic value is used in such calls to ensure a valid return value is received.")]),t._v(" "),n("p",[t._v("If it is unknown whether a contract has the "),n("code",[t._v("ownerOfChild")]),t._v(" function then the first four bytes of the "),n("code",[t._v("parentTokenOwner")]),t._v(" return value must be compared to "),n("code",[t._v("0xcd740db5")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"onerc721received"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onerc721received"}},[t._v("#")]),t._v(" onERC721Received")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice A token receives a child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _operator The address that caused the transfer.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The prior owner of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The token that is being transferred to the parent.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Up to the first 32 bytes contains an integer which is the receiving parent tokenId.  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onERC721Received")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _operator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[t._v("This is a function defined in the ERC721 standard. This function is called in an ERC721 contract when "),n("code",[t._v("safeTransferFrom")]),t._v(" is called. The "),n("code",[t._v("bytes _data")]),t._v(" argument contains an integer value from 1 to 32 bytes long that is the parent tokenId that an ERC721 token is transferred to.")]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("onERC721Received")]),t._v(" function is how a top-down composable contract is notified that an ERC721 token has been transferred to it and what tokenId in the top-down composable is the parent tokenId.")]),t._v(" "),n("p",[t._v("The return value for "),n("code",[t._v("onERC721Received")]),t._v(" is the magic value "),n("code",[t._v("0x150b7a02")]),t._v(" which is equal to "),n("code",[t._v('bytes4(keccak256(abi.encodePacked("onERC721Received(address,address,uint256,bytes)")))')]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"transferchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferchild"}},[t._v("#")]),t._v(" transferChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function authenticates "),n("code",[t._v("msg.sender")]),t._v(" and transfers a child token from a top-down composable to a different address.")]),t._v(" "),n("p",[t._v("This function makes this call within it:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC721")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h4",{attrs:{id:"safetransferchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#safetransferchild"}},[t._v("#")]),t._v(" safeTransferChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function authenticates "),n("code",[t._v("msg.sender")]),t._v(" and transfers a child token from a top-down composable to a different address.")]),t._v(" "),n("p",[t._v("This function makes this call within it:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC721")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h4",{attrs:{id:"safetransferchild-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#safetransferchild-2"}},[t._v("#")]),t._v(" safeTransferChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer child token from top-down composable to address or other top-down composable.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the token that is being transferred.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format, can be used to specify tokenId to transfer to")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("This function authenticates "),n("code",[t._v("msg.sender")]),t._v(" and transfers a child token from a top-down composable to a different address or to a different top-down composable.")]),t._v(" "),n("p",[t._v("A child token is transferred to a different top-down composable if the "),n("code",[t._v("_to")]),t._v(" address is a top-down composable contract and "),n("code",[t._v("bytes _data")]),t._v(" is supplied an integer representing the parent tokenId.")]),t._v(" "),n("p",[t._v("This function makes this call within it:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC721")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("safeTransferFrom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h4",{attrs:{id:"transferchildtoparent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferchildtoparent"}},[t._v("#")]),t._v(" transferChildToParent")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer bottom-up composable child token from top-down composable to other ERC721 token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token to transfer from.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The bottom-up composable contract of the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The token that is being transferred.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferChildToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("This function authenticates "),n("code",[t._v("msg.sender")]),t._v(" and transfers a child bottom-up composable token from a top-down composable to a different ERC721 token. This function can only be used when the child token is a bottom-up composable token. It is designed to transfer a bottom-up composable token from a top-down composable to an ERC721 token (bottom-up style) in one transaction.")]),t._v(" "),n("p",[t._v("This function makes this call within it:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ERC998ERC721BottomUp")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  _childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("h4",{attrs:{id:"getchild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#getchild"}},[t._v("#")]),t._v(" getChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get a child token from an ERC721 contract.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The address that owns the child token.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that becomes the parent owner")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The ERC721 contract of the child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childTokenId The tokenId of the child token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _childTokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function is used to transfer an ERC721 token when its contract does not have a "),n("code",[t._v("safeTransferChild(uint256 _fromTokenId, address _to, address _childContract, uint256 _childTokenId, bytes _data)")]),t._v(" function.")]),t._v(" "),n("p",[t._v("A transfer with this function is done in two steps:")]),t._v(" "),n("ol",[n("li",[t._v("The owner of the ERC721 token calls "),n("code",[t._v("approve")]),t._v(" or "),n("code",[t._v("setApprovalForAll")]),t._v(" in the ERC721 contract for the top-down composable contract.")]),t._v(" "),n("li",[t._v("The owner of the ERC721 token calls "),n("code",[t._v("getChild")]),t._v(" in the top-down composable contract for the ERC721 token.")])]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("getChild")]),t._v(" function must authenticate that "),n("code",[t._v("msg.sender")]),t._v(" is the owner of the ERC721 token in the ERC721 contract or is approved or an operator of the ERC721 token in the ERC721 contract.")]),t._v(" "),n("h4",{attrs:{id:"erc721-top-down-composable-enumeration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc721-top-down-composable-enumeration"}},[t._v("#")]),t._v(" ERC721 Top-Down Composable Enumeration")]),t._v(" "),n("p",[t._v("Optional interface for top-down composable enumeration:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  @dev The ERC-165 identifier for this interface is 0xa344afe4")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC721TopDownEnumerable")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the total number of child contracts with tokens that are owned by tokenId.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The parent token of child tokens in child contracts")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return uint256 The total number of child contracts with tokens owned by tokenId.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalChildContracts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get child contract by tokenId and index")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The parent token of child tokens in child contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _index The index position of the child contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return childContract The contract found at the tokenId and index.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("childContractByIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _index\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the total number of child tokens owned by tokenId that exist in a child contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The parent token of child tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The child contract containing the child tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return uint256 The total number of child tokens found in child contract that are owned by tokenId.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalChildTokens")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get child token owned by tokenId, in child contract, at index position")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The parent token of the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _childContract The child contract of the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _index The index position of the child token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return childTokenId The child tokenId for the parent token, child token and index")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("childTokenByIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _childContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _index\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" childTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br")])]),n("h3",{attrs:{id:"erc20-top-down-composable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc20-top-down-composable"}},[t._v("#")]),t._v(" ERC20 Top-Down Composable")]),t._v(" "),n("p",[t._v("ERC20 top-down composables act as containers for ERC20 tokens.")]),t._v(" "),n("p",[t._v("ERC20 top-down composables are ERC721 tokens that can receive, hold and transfer ERC20 tokens.")]),t._v(" "),n("p",[t._v("There are two ways to transfer ERC20 tokens to an ERC20 Top-Down Composable:")]),t._v(" "),n("ol",[n("li",[t._v("Use the "),n("code",[t._v("transfer(address _to, uint256 _value, bytes _data);")]),t._v(" function from the ERC223 contract. The "),n("code",[t._v("_to")]),t._v(" argument is the ERC20 top-down composable contract address. The "),n("code",[t._v("_value")]),t._v(" argument is how many ERC20 tokens to transfer. The "),n("code",[t._v("bytes")]),t._v(" argument holds the integer value of the top-down composable tokenId that receives the ERC20 tokens.")]),t._v(" "),n("li",[t._v("Call "),n("code",[t._v("approve")]),t._v(" in the ERC20 contract for the ERC20 top-down composable contract. Then call "),n("code",[t._v("getERC20(address _from, uint256 _tokenId, address _erc20Contract, uint256 _value)")]),t._v(" from the ERC20 top-down composable contract.")])]),t._v(" "),n("p",[t._v("The first way is for ERC20 contracts that support the ERC223 standard. The second way is for contracts that do not.")]),t._v(" "),n("p",[t._v("ERC20 top-down composables implement the following interface:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @title ERC998ERC20 Top-Down Composable Non-Fungible Token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  Note: the ERC-165 identifier for this interface is 0x7294ffed")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC20TopDown")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token receives ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The prior owner of the token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toTokenId The token that receives the ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens received.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ReceivedERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token transfers ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that owned the ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address that receives the ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice A token receives ERC20 tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The prior owner of the ERC20 tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens received")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Up to the first 32 bytes contains an integer which is the receiving tokenId.  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenFallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Look up the balance of ERC20 tokens for a specific token and ERC20 contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that owns the ERC20 tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return The number of ERC20 tokens owned by a token from an ERC20 contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOfERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer ERC20 tokens to address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The address to send the ERC20 tokens to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer ERC20 tokens to address or ERC20 top-down composable")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The address to send the ERC20 tokens to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc223Contract The ERC223 token contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format, can be used to specify tokenId to transfer to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferERC223")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc223Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get ERC20 tokens from ERC20 contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The current owner address of the ERC20 tokens that are being transferred.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer the ERC20 tokens to.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 token contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br")])]),n("h4",{attrs:{id:"tokenfallback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tokenfallback"}},[t._v("#")]),t._v(" tokenFallback")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice A token receives ERC20 tokens")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The prior owner of the ERC20 tokens")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens received")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Up to the first 32 bytes contains an integer which is the receiving tokenId.  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenFallback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("This function comes from the "),n("a",{attrs:{href:"https://github.com/ethereum/EIPs/issues/223",target:"_blank",rel:"noopener noreferrer"}},[t._v("ERC223 standard"),n("OutboundLink")],1),t._v(" which is an extension of the ERC20 standard. This function is called on the receiving contract from the sending contract when ERC20 tokens are transferred. This function is how the ERC20 top-down composable contract gets notified that one of its tokens received ERC20 tokens. Which token received ERC20 tokens is specified in the "),n("code",[t._v("_data")]),t._v(" parameter.")]),t._v(" "),n("h4",{attrs:{id:"balanceoferc20"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#balanceoferc20"}},[t._v("#")]),t._v(" balanceOfERC20")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Look up the balance of ERC20 tokens for a specific token and ERC20 contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that owns the ERC20 tokens")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return The number of ERC20 tokens owned by a token from an ERC20 contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOfERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("Gets the balance of ERC20 tokens owned by a token from a specific ERC20 contract.")]),t._v(" "),n("h4",{attrs:{id:"transfererc20"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transfererc20"}},[t._v("#")]),t._v(" transferERC20")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer ERC20 tokens to address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer from")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The address to send the ERC20 tokens to")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This is used to transfer ERC20 tokens from a token to an address. This function calls "),n("code",[t._v("ERC20(_erc20Contract).transfer(_to, _value)")]),t._v(";")]),t._v(" "),n("p",[t._v("This function must authenticate "),n("code",[t._v("msg.sender")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"transfererc223"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transfererc223"}},[t._v("#")]),t._v(" transferERC223")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer ERC20 tokens to address or ERC20 top-down composable")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The address to send the ERC20 tokens to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc223Contract The ERC223 token contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format, can be used to specify tokenId to transfer to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferERC223")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc223Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("This function is from the "),n("a",{attrs:{href:"https://github.com/ethereum/EIPs/issues/223",target:"_blank",rel:"noopener noreferrer"}},[t._v("ERC223 standard"),n("OutboundLink")],1),t._v(". It is used to transfer ERC20 tokens from a token to an address or to another token by putting an integer token value in the "),n("code",[t._v("_data")]),t._v(" argument.")]),t._v(" "),n("p",[t._v("This function must authenticate "),n("code",[t._v("msg.sender")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"geterc20"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#geterc20"}},[t._v("#")]),t._v(" getERC20")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get ERC20 tokens from ERC20 contract.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The current owner address of the ERC20 tokens that are being transferred.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to transfer the ERC20 tokens to.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _erc20Contract The ERC20 token contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _value The number of ERC20 tokens to transfer  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getERC20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _erc20Contract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _value\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function is used to transfer ERC20 tokens to an ERC20 top-down composable when an ERC20 contract does not have a "),n("code",[t._v("transferERC223(uint256 _tokenId, address _to, address _erc223Contract, uint256 _value, bytes _data)")]),t._v(" function.")]),t._v(" "),n("p",[t._v("Before this function can be used the ERC20 top-down composable contract address must be approved in the ERC20 contract to transfer the ERC20 tokens.")]),t._v(" "),n("p",[t._v("This function must authenticate that "),n("code",[t._v("msg.sender")]),t._v(" equals "),n("code",[t._v("_from")]),t._v(" or has been approved in the ERC20 contract.")]),t._v(" "),n("h4",{attrs:{id:"erc20-top-down-composable-enumeration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc20-top-down-composable-enumeration"}},[t._v("#")]),t._v(" ERC20 Top-Down Composable Enumeration")]),t._v(" "),n("p",[t._v("Optional interface for top-down composable enumeration:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev The ERC-165 identifier for this interface is 0xc5fd96cd")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC20TopDownEnumerable")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the number of ERC20 contracts that token owns ERC20 tokens from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that owns ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return uint256 The number of ERC20 contracts")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalERC20Contracts")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get an ERC20 contract that token owns ERC20 tokens from by index")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that owns ERC20 tokens.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _index The index position of the ERC20 contract.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return address The ERC20 contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("erc20ContractByIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _index\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br")])]),n("h3",{attrs:{id:"erc721-bottom-up-composable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc721-bottom-up-composable"}},[t._v("#")]),t._v(" ERC721 Bottom-Up Composable")]),t._v(" "),n("p",[t._v("ERC721 bottom-up composables are ERC721 tokens that attach themselves to other ERC721 tokens.")]),t._v(" "),n("p",[t._v("ERC721 bottom-up composable contracts store the owning address of a token and the parent tokenId if any.")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @title ERC998ERC721 Bottom-Up Composable Non-Fungible Token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  Note: the ERC-165 identifier for this interface is 0xa1b23002")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC721BottomUp")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token is transferred to an ERC721 token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The contract the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toTokenId The token the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token is transferred from an ERC721 token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The contract the token is transferred from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The token the token is transferred from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred  ")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of tokenId.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to query for a root owner address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the owner address and parent token (if there is one) of a token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The tokenId to query.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return tokenOwner The owner address of the token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenId The parent owner of the token and ERC998 magic value")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return isParent True if parentTokenId is a valid parent tokenId and false if there is no parent tokenId")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" tokenOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" parentTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" isParent\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from owner address to a token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The owner address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer a token from a token to another token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferAsChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br")])]),n("h4",{attrs:{id:"rootownerof-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rootownerof-2"}},[t._v("#")]),t._v(" rootOwnerOf")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the root owner of tokenId.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token to query for a root owner address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return rootOwner The root owner at the top of tree of tokens and ERC998 magic value.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rootOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" rootOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("This function traverses token owners until the the root owner address of "),n("code",[t._v("_tokenId")]),t._v(" is found.")]),t._v(" "),n("p",[t._v("The first 4 bytes of rootOwner contain the ERC998 magic value "),n("code",[t._v("0xcd740db5")]),t._v(". The last 20 bytes contain the root owner address.")]),t._v(" "),n("p",[t._v("The magic value is returned because this function may be called on contracts when it is unknown if the contracts have a "),n("code",[t._v("rootOwnerOf")]),t._v(" function. The magic value is used in such calls to ensure a valid return value is received.")]),t._v(" "),n("p",[t._v("If it is unknown whether a contract has the "),n("code",[t._v("rootOwnerOf")]),t._v(" function then the first four bytes of the "),n("code",[t._v("rootOwner")]),t._v(" return value must be compared to "),n("code",[t._v("0xcd740db5")]),t._v(".")]),t._v(" "),n("p",[n("code",[t._v("0xcd740db5")]),t._v(" is equal to:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootOwnerOf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rootOwnerOfChild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" \n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tokenOwnerOf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ownerOfChild"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("selector"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("Here is an example of a value returned by "),n("code",[t._v("rootOwnerOf")]),t._v(".\n"),n("code",[t._v("0xcd740db50000000000000000e5240103e1ff986a2c8ae6b6728ffe0d9a395c59")])]),t._v(" "),n("h4",{attrs:{id:"tokenownerof"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tokenownerof"}},[t._v("#")]),t._v(" tokenOwnerOf")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the owner address and parent token (if there is one) of a token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The tokenId to query.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return tokenOwner The owner address of the token and ERC998 magic value.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return parentTokenId The parent owner of the token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return isParent True if parentTokenId is a valid parent tokenId and false if there is no parent tokenId")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tokenOwnerOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" tokenOwner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" parentTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" isParent\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[t._v("This function is used to get the owning address and parent tokenId of a token if there is one stored in the contract.")]),t._v(" "),n("p",[t._v("If "),n("code",[t._v("isParent")]),t._v(" is true then "),n("code",[t._v("tokenOwner")]),t._v(" is the owning ERC721 contract address and "),n("code",[t._v("parentTokenId")]),t._v(" is a valid parent tokenId. If "),n("code",[t._v("isParent")]),t._v(" is false then "),n("code",[t._v("tokenOwner")]),t._v(" is a user address and "),n("code",[t._v("parentTokenId")]),t._v(" does not contain a valid parent tokenId and must be ignored.")]),t._v(" "),n("p",[t._v("The first 4 bytes of "),n("code",[t._v("tokenOwner")]),t._v(" contain the ERC998 magic value "),n("code",[t._v("0xcd740db5")]),t._v(". The last 20 bytes contain the token owner address.")]),t._v(" "),n("p",[t._v("The magic value is returned because this function may be called on contracts when it is unknown if the contracts have a "),n("code",[t._v("tokenOwnerOf")]),t._v(" function. The magic value is used in such calls to ensure a valid return value is received.")]),t._v(" "),n("p",[t._v("If it is unknown whether a contract has the "),n("code",[t._v("rootOwnerOf")]),t._v(" function then the first four bytes of the "),n("code",[t._v("tokenOwner")]),t._v(" return value must be compared to "),n("code",[t._v("0xcd740db5")]),t._v(".")]),t._v(" "),n("h4",{attrs:{id:"transfertoparent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transfertoparent"}},[t._v("#")]),t._v(" transferToParent")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from owner address to a token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The owner address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[t._v("This function is used to transfer a token from an address to a token. "),n("code",[t._v("msg.sender")]),t._v(" must be authenticated.")]),t._v(" "),n("p",[t._v("This function must check that "),n("code",[t._v("_toToken")]),t._v(" exists in "),n("code",[t._v("_toContract")]),t._v(" and throw if not.")]),t._v(" "),n("h4",{attrs:{id:"transferfromparent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferfromparent"}},[t._v("#")]),t._v(" transferFromParent")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("This function is used to transfer a token from a token to an address. "),n("code",[t._v("msg.sender")]),t._v(" must be authenticated.")]),t._v(" "),n("p",[t._v("This function must check that "),n("code",[t._v("_fromContract")]),t._v(" and "),n("code",[t._v("_fromTokenId")]),t._v(" own "),n("code",[t._v("_tokenId")]),t._v(" and throw not.")]),t._v(" "),n("h4",{attrs:{id:"transferaschild"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferaschild"}},[t._v("#")]),t._v(" transferAsChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer a token from a token to another token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The token that is transferred")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferAsChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("This function is used to transfer a token from a token to another token. "),n("code",[t._v("msg.sender")]),t._v(" must be authenticated.")]),t._v(" "),n("p",[t._v("This function must check that "),n("code",[t._v("_toToken")]),t._v(" exists in "),n("code",[t._v("_toContract")]),t._v(" and throw if not.")]),t._v(" "),n("p",[t._v("This function must check that "),n("code",[t._v("_fromContract")]),t._v(" and "),n("code",[t._v("_fromTokenId")]),t._v(" own "),n("code",[t._v("_tokenId")]),t._v(" and throw if not.")]),t._v(" "),n("h4",{attrs:{id:"erc721-bottom-up-composable-enumeration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc721-bottom-up-composable-enumeration"}},[t._v("#")]),t._v(" ERC721 Bottom-Up Composable Enumeration")]),t._v(" "),n("p",[t._v("Optional interface for bottom-up composable enumeration:")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev The ERC-165 identifier for this interface is 0x8318b539")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC721BottomUpEnumerable")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the number of ERC721 tokens owned by parent token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _parentContract The contract the parent ERC721 token is from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _parentTokenId The parent tokenId that owns tokens")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  @return uint256 The number of ERC721 tokens owned by parent token.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("totalChildTokens")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _parentContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _parentTokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get a child token by index")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _parentContract The contract the parent ERC721 token is from.")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _parentTokenId The parent tokenId that owns the token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _index The index position of the child token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return uint256 The child tokenId owned by the parent token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("childTokenByIndex")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _parentContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _parentTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _index\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h3",{attrs:{id:"erc20-bottom-up-composable"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#erc20-bottom-up-composable"}},[t._v("#")]),t._v(" ERC20 Bottom-Up Composable")]),t._v(" "),n("p",[t._v("ERC20 bottom-up composables are ERC20 tokens that attach themselves to ERC721 tokens, or are owned by a user address like standard ERC20 tokens.")]),t._v(" "),n("p",[t._v("When owned by an ERC721 token, ERC20 bottom-up composable contracts store the owning address of a token and the parent tokenId. ERC20 bottom-up composables add several methods to the ERC20 and ERC223 interfaces allowing for querying the balance of parent tokens, and transferring tokens to, from, and between parent tokens.")]),t._v(" "),n("p",[t._v("This functionality can be implemented by adding one additional mapping to track balances of tokens, in addition to the standard mapping for tracking user address balances.")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This mapping tracks standard ERC20/ERC223 ownership, where an address owns")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  a particular amount of tokens.")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" userBalances"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This additional mapping tracks ERC998 ownership, where an ERC721 token owns")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("///  a particular amount of tokens. This tracks contractAddres => tokenId => balance")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mapping")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" nftBalances"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("The complete interface is below.")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @title ERC998ERC20 Bottom-Up Composable Fungible Token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-998.md")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// Note: The ERC-165 identifier for this interface is 0xffafa991")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC998ERC20BottomUp")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token is transferred to an ERC721 token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The contract the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toTokenId The token the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens transferred")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @dev This emits when a token is transferred from an ERC721 token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The contract the token is transferred from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The token the token is transferred from")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens transferred")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("event")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TransferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("indexed")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the balance of a non-fungible parent token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenContract The contract tracking the parent token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The ID of the parent token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return amount The balance of the token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOfToken")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _tokenContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer tokens from owner address to a token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The owner address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address, using ERC223 semantics")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format, can be used to specify the sender tokenId")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParentERC223")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer a token from a token to another token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount tokens to transfer")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferAsChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br")])]),n("h4",{attrs:{id:"balanceoftoken"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#balanceoftoken"}},[t._v("#")]),t._v(" balanceOfToken")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Get the balance of a non-fungible parent token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenContract The contract tracking the parent token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _tokenId The ID of the parent token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @return amount The balance of the token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOfToken")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _tokenContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _tokenId\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("This function returns the balance of a non-fungible token. It mirrors the standard ERC20 method "),n("code",[t._v("balanceOf")]),t._v(", but accepts the address of the parent token's contract, and the parent token's ID. This method behaves identically to "),n("code",[t._v("balanceOf")]),t._v(", but checks for ownership by ERC721 tokens rather than user addresses.")]),t._v(" "),n("h4",{attrs:{id:"transfertoparent-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transfertoparent-2"}},[t._v("#")]),t._v(" transferToParent")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer tokens from owner address to a token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _from The owner address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferToParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _from"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function transfers an amount of tokens from a user address to an ERC721 token. This function MUST ensure that the recipient contract implements ERC721 using the ERC165 "),n("code",[t._v("supportsInterface")]),t._v(" function. This function SHOULD ensure that the recipient token actually exists, by calling "),n("code",[t._v("ownerOf")]),t._v(" on the recipient token's contract, and ensuring it neither throws nor returns the zero address. This function MUST emit the "),n("code",[t._v("TransferToParent")]),t._v(" event upon a successful transfer (in addition to the standard ERC20 "),n("code",[t._v("Transfer")]),t._v(" event!). This function MUST throw if the "),n("code",[t._v("_from")]),t._v(" account balance does not have enough tokens to spend.")]),t._v(" "),n("h4",{attrs:{id:"transferfromparent-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferfromparent-2"}},[t._v("#")]),t._v(" transferFromParent")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParent")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("This function transfers an amount of tokens from an ERC721 token to an address. This function MUST emit the "),n("code",[t._v("TransferFromParent")]),t._v(" event upon a successful transfer (in addition to the standard ERC20 "),n("code",[t._v("Transfer")]),t._v(" event!). This function MUST throw if the balance of the sender ERC721 token is less than the "),n("code",[t._v("_amount")]),t._v(" specified. This function MUST verify that the "),n("code",[t._v("msg.sender")]),t._v(" owns the sender ERC721 token, and MUST throw otherwise.")]),t._v(" "),n("h4",{attrs:{id:"transferfromparenterc223"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferfromparenterc223"}},[t._v("#")]),t._v(" transferFromParentERC223")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer token from a token to an address, using ERC223 semantics")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _to The address the token is transferred to")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount of tokens to transfer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _data Additional data with no specified format, can be used to specify the sender tokenId")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFromParentERC223")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _to"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),t._v(" _data\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("This function transfers an amount of tokens from an ERC721 token to an address. This function has identical requirements to "),n("code",[t._v("transferFromParent")]),t._v(", except that it additionally MUST invoke "),n("code",[t._v("tokenFallback")]),t._v(" on the recipient address, if the address is a contract, as specified by ERC223.")]),t._v(" "),n("h4",{attrs:{id:"transferaschild-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#transferaschild-2"}},[t._v("#")]),t._v(" transferAsChild")]),t._v(" "),n("div",{staticClass:"language-solidity line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-solidity"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @notice Transfer a token from a token to another token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromContract The address of the owning contract")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _fromTokenId The owning token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toContract The ERC721 contract of the receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _toToken The receiving token")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// @param _amount The amount tokens to transfer")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferAsChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _fromContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fromTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _toContract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _toTokenId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _amount\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("This function transfers an amount of tokens from an ERC721 token to another ERC721 token. This function MUST emit BOTH the "),n("code",[t._v("TransferFromParent")]),t._v(" and "),n("code",[t._v("TransferToParent")]),t._v(" events (in addition to the standard ERC20 "),n("code",[t._v("Transfer")]),t._v(" event!). This function MUST throw if the balance of the sender ERC721 token is less than the "),n("code",[t._v("_amount")]),t._v(" specified. This function MUST verify that the "),n("code",[t._v("msg.sender")]),t._v(" owns the sender ERC721 token, and MUST throw otherwise. This function MUST ensure that the recipient contract implements ERC721 using the ERC165 "),n("code",[t._v("supportsInterface")]),t._v(" function. This function SHOULD ensure that the recipient token actually exists, by calling "),n("code",[t._v("ownerOf")]),t._v(" on the recipient token's contract, and ensuring it neither throws nor returns the zero address.")]),t._v(" "),n("h3",{attrs:{id:"notes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[t._v("#")]),t._v(" Notes")]),t._v(" "),n("p",[t._v("For backwards-compatibility, implementations MUST emit the standard ERC20 "),n("code",[t._v("Transfer")]),t._v(" event when a transfer occurs, regardless of whether the sender and recipient are addresses or ERC721 tokens. In the case that either sender or recipient are tokens, the corresponding parameter in the "),n("code",[t._v("Transfer")]),t._v(" event SHOULD be the contract address of the token.")]),t._v(" "),n("p",[t._v("Implementations MUST implement all ERC20 and ERC223 functions in addition to the functions specified in this interface.")]),t._v(" "),n("h2",{attrs:{id:"rationale"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),n("p",[t._v("Two different kinds of composable (top-down and bottom-up) exist to handle different use cases. A regular ERC721 token cannot own a top-down composable, but it can own a bottom-up composable. A bottom-up composable cannot own a regular ERC721 but a top-down composable can own a regular ERC721 token. Having multiple kinds of composables enable different token ownership possibilities.")]),t._v(" "),n("h3",{attrs:{id:"which-kind-of-composable-to-use"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#which-kind-of-composable-to-use"}},[t._v("#")]),t._v(" Which Kind of Composable To Use?")]),t._v(" "),n("p",[t._v("If you want to transfer regular ERC721 tokens to non-fungible tokens, then use top-down composables.")]),t._v(" "),n("p",[t._v("If you want to transfer non-fungible tokens to regular ERC721 tokens then use bottom-up composables.")]),t._v(" "),n("h3",{attrs:{id:"explicit-transfer-parameters"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#explicit-transfer-parameters"}},[t._v("#")]),t._v(" Explicit Transfer Parameters")]),t._v(" "),n("p",[t._v("Every ERC998 transfer function includes explicit parameters to specify the prior owner and the new owner of a token. Explicitly providing "),n("strong",[t._v("from")]),t._v(" and "),n("strong",[t._v("to")]),t._v(" is done intentionally to avoid situations where tokens are transferred in unintended ways.")]),t._v(" "),n("p",[t._v("Here is an example of what could occur if "),n("strong",[t._v("from")]),t._v(" was not explicitly provided in transfer functions:")]),t._v(" "),n("blockquote",[n("p",[t._v("An exchange contract is an approved operator in a specific composable contract for user A, user B and user C.")]),t._v(" "),n("p",[t._v("User A transfers token 1 to user B. At the same time the exchange contract transfers token 1 to user C (with the implicit intention to transfer from user A). User B gets token 1 for a minute before it gets incorrectly transferred to user C. The second transfer should have failed but it didn't because no explicit "),n("strong",[t._v("from")]),t._v(" was provided to ensure that token 1 came from user A.")])]),t._v(" "),n("h3",{attrs:{id:"additional-reading-material"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#additional-reading-material"}},[t._v("#")]),t._v(" Additional Reading Material")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://medium.com/coinmonks/introducing-crypto-composables-ee5701fde217",target:"_blank",rel:"noopener noreferrer"}},[t._v("Introducing Crypto Composables"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://medium.com/coinmonks/introducing-crypto-composables-ee5701fde217",target:"_blank",rel:"noopener noreferrer"}},[t._v("Crypto ComposablesBuilding Blocks and Applications"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://hackernoon.com/top-down-and-bottom-up-composables-whats-the-difference-and-which-one-should-you-use-db939f6acf1d",target:"_blank",rel:"noopener noreferrer"}},[t._v("Top-Down and Bottom-Up Composables, What's the Difference and Which One Should You Use?"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Join the discussion about composables in the "),n("a",{attrs:{href:"https://discord.gg/8cuuj2Y",target:"_blank",rel:"noopener noreferrer"}},[t._v("NFTy Magician's Discord"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("h2",{attrs:{id:"backwards-compatibility"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#backwards-compatibility"}},[t._v("#")]),t._v(" Backwards Compatibility")]),t._v(" "),n("p",[t._v("Composables are designed to work with ERC721, ERC223 and ERC20 tokens.")]),t._v(" "),n("p",[t._v("Some older ERC721 contracts do not have a "),n("code",[t._v("safeTransferFrom")]),t._v(" function. The "),n("code",[t._v("getChild")]),t._v(" function can still be used to transfer a token to an ERC721 top-down composable.")]),t._v(" "),n("p",[t._v("If an ERC20 contract does not have the ERC223 function "),n("code",[t._v("transfer(address _to, uint _value, bytes _data)")]),t._v(" then the "),n("code",[t._v("getERC20")]),t._v(" function can still be used to transfer ERC20 tokens to an ERC20 top-down composable.")]),t._v(" "),n("h2",{attrs:{id:"implementations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementations"}},[t._v("#")]),t._v(" Implementations")]),t._v(" "),n("p",[t._v("An implementation can be found here: https://github.com/mattlockyer/composables-998")]),t._v(" "),n("h2",{attrs:{id:"copyright"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),n("p",[t._v("Copyright and related rights waived via "),n("a",{attrs:{href:"https://creativecommons.org/publicdomain/zero/1.0/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CC0"),n("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);s.default=e.exports}}]);